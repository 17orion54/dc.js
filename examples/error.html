<!DOCTYPE html>
<html lang="en">
<head>
    <title>dc.js - Number Display Example</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../css/dc.css"/>
</head>
<body>

<div id="the-chart"></div>


<script type="text/javascript" src="../js/d3.js"></script>
<script type="text/javascript" src="../js/crossfilter.js"></script>
<script type="text/javascript" src="../js/dc.js"></script>
<script type="text/javascript">

var theChart = dc.rowChart("#the-chart");

var jsonStr = ([
    {"date": "2011-11-14","k":1, "value": 2},
    {"date": "2011-11-15","k":2, "value": 4},
    {"date":"2011-11-16","k":3, "value": 8},
    {"date":"2011-11-17","k":4, "value": 16},
    {"date":"2011-11-18","k":5, "value": 32},
    {"date":"2011-11-19","k":6, "value": 64},
    {"date":"2011-11-20","k":7, "value": 128},
    {"date":"2011-11-21","k":8, "value": 256},
    {"date":"2011-11-22","k":9, "value": 512},
    {"date":"2011-11-23","k":10, "value": 1024},
    {"date":"2011-11-24","k":11, "value": 2048},
    {"date":"2011-11-25","k":12, "value": 4096}
]);


// feed it through crossfilter
var ndx = crossfilter(jsonStr);
var all = ndx.groupAll();

//setup dimmensions
var theDimension = ndx.dimension(function (d) {
    return +d.k;
});

var theGroup = theDimension.group().reduceSum(
        function(d) {
            return +d.value;
});

theChart.width(420)
    .height(180)
    .dimension(theDimension)
    .group(theGroup)
    .elasticX(false)
    .x(d3.scale.log().domain([1, 10000]).range([0,420]).nice())
    .xAxis().ticks(3).scale(theChart.x());

dc.renderAll();

</script>

</body>
</html>
