dc={version:"0.1.0",__charts__:[]},dc.registerChart=function(e){dc.__charts__.push(e)},dc.hasChart=function(e){return dc.__charts__.indexOf(e)>=0},dc.removeAllCharts=function(){dc.__charts__=[]},dc.filterAll=function(){for(var e=0;e<dc.__charts__.length;++e)dc.__charts__[e].filterAll()},dc.renderAll=function(){for(var e=0;e<dc.__charts__.length;++e)dc.__charts__[e].render()},dc.createPieChart=function(e){var t=new this.PieChart(e);return dc.registerChart(t),t},dc.PieChart=function(e){function h(){i.select("svg").remove();if(E()){var e=p(),t=d3.layout.pie().value(function(e){return e.value}),n=d3.svg.arc().outerRadius(l),r=m(e,t,n);g(r,n),w()}}function p(){var e=i.append("svg").data([u.all()]).attr("width",a).attr("height",f).append("g").attr("transform","translate("+d()+","+v()+")");return e}function d(){return a/2}function v(){return f/2}function m(e,t,r){var i=e.selectAll("g."+n).data(t).enter().append("g").attr("class",n);return i.append("path").attr("fill",function(e,t){return s(t)}).attr("d",r).on("click",function(e,t){y(e.data.key),dc.renderAll()}),i}function g(e,t){e.append("text").attr("transform",function(e){e.innerRadius=0,e.outerRadius=l;var n=t.centroid(e);return isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}).attr("text-anchor","middle").text(function(e){var t=e.data;return t.value==0?"":t.key})}function y(e){c=e,w(),E()&&o.filter(c)}function b(e){return c==e.data.key}function w(){c&&i.selectAll("g."+n).select("path").each(function(e,t){b(e)?d3.select(this).attr("fill-opacity",1).attr("stroke","#ccc").attr("stroke-width",3):d3.select(this).attr("fill-opacity",.1).attr("stroke-width",0)})}function E(){return o!=undefined&&u!=undefined}var t=null,n="pie-slice",r=e,i=d3.select(r),s=d3.scale.category20c(),o,u,a,f,l,c=t;this.render=function(){h()},this.select=function(e){return i.select(e)},this.selectAll=function(e){return i.selectAll(e)},this.colors=function(e){return arguments.length?(s=e,this):s},this.dimension=function(e){return arguments.length?(o=e,this):o},this.group=function(e){return arguments.length?(u=e,this):u},this.filter=function(e){return o.filter(e),this},this.width=function(e){return arguments.length?(a=e,this):a},this.height=function(e){return arguments.length?(f=e,this):f},this.radius=function(e){return arguments.length?(l=e,this):l},this.filter=function(e){return arguments.length?(y(e),this):c},this.filterAll=function(){return this.filter(t)},this.hasFilter=function(){return c!=t}};