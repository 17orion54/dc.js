/*!
 *  dc 4.0.0-alpha.0
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012-2019 Nick Zhu & the dc.js Developers
 *  https://github.com/dc-js/dc.js/blob/master/AUTHORS
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t=t||self).dc={},t.d3)}(this,function(t,e){"use strict";const n={CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},r=e.timeFormat("%m/%d/%Y"),i={filters:function(t){for(var e="",n=0;n<t.length;++n)n>0&&(e+=", "),e+=i.filter(t[n]);return e},filter:function(t){var e="";return void 0!==t&&null!==t&&(t instanceof Array?t.length>=2?e="["+t.map(function(t){return o.printSingleValue(t)}).join(" -> ")+"]":t.length>=1&&(e=o.printSingleValue(t[0])):e=o.printSingleValue(t)),e}},a=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},o={printSingleValue:function(t){var e=""+t;return t instanceof Date?e=r(t):"string"==typeof t?e=t:o.isFloat(t)?e=o.printSingleValue.fformat(t):o.isInteger(t)&&(e=Math.round(t)),e}};o.printSingleValue.fformat=e.format(".2f"),o.toTimeFunc=function(t){return"time"+t.charAt(0).toUpperCase()+t.slice(1)},o.add=function(t,n,r){if("string"==typeof n&&(n=n.replace("%","")),t instanceof Date)return"string"==typeof n&&(n=+n),"millis"===r?new Date(t.getTime()+n):("function"!=typeof(r=r||e.timeDay)&&(r=e[o.toTimeFunc(r)]),r.offset(t,n));if("string"==typeof n){var i=+n/100;return t>0?t*(1+i):t*(1-i)}return t+n},o.subtract=function(t,n,r){if("string"==typeof n&&(n=n.replace("%","")),t instanceof Date)return"string"==typeof n&&(n=+n),"millis"===r?new Date(t.getTime()-n):("function"!=typeof(r=r||e.timeDay)&&(r=e[o.toTimeFunc(r)]),r.offset(t,-n));if("string"==typeof n){var i=+n/100;return t<0?t*(1+i):t*(1-i)}return t-n},o.isNumber=function(t){return t===+t},o.isFloat=function(t){return t===+t&&t!==(0|t)},o.isInteger=function(t){return t===+t&&t===(0|t)},o.isNegligible=function(t){return!o.isNumber(t)||t<n.NEGLIGIBLE_NUMBER&&t>-n.NEGLIGIBLE_NUMBER},o.clamp=function(t,e,n){return t<e?e:t>n?n:t},o.constant=function(t){return function(){return t}};let l=0;function c(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n]}o.uniqueId=function(){return++l},o.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},o.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},o.safeNumber=function(t){return o.isNumber(+t)?+t:0},o.arraysEqual=function(t,e){return!t&&!e||!(!t||!e)&&(t.length===e.length&&t.every(function(t,n){return t.valueOf()===e[n].valueOf()}))},o.allChildren=function(t){var e=[];if(e.push(t.path),console.log("currentNode",t),t.children)for(var n=0;n<t.children.length;n++)e=e.concat(o.allChildren(t.children[n]));return e},o.toHierarchy=function(t,e){for(var n={key:"root",children:[]},r=0;r<t.length;r++)for(var i=t[r],a=i.key,o=e(i),l=n,u=0;u<a.length;u++){var s,d=a.slice(0,u+1),f=l.children,h=a[u];u+1<a.length?(void 0===(s=c(f,h))&&(s={key:h,children:[],path:d},f.push(s)),l=s):(s={key:h,value:o,data:i,path:d},f.push(s))}return n},o.getAncestors=function(t){for(var e=[],n=t;n.parent;)e.unshift(n.name),n=n.parent;return e},o.arraysIdentical=function(t,e){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!==i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0});let u=null;const s=function(){var t={};function e(e){return e||(e=n.DEFAULT_CHART_GROUP),t[e]||(t[e]=[]),e}return{has:function(e){for(let n in t)if(t[n].indexOf(e)>=0)return!0;return!1},register:function(n,r){r=e(r),t[r].push(n)},deregister:function(n,r){r=e(r);for(var i=0;i<t[r].length;i++)if(t[r][i].anchorName()===n.anchorName()){t[r].splice(i,1);break}},clear:function(e){e?delete t[e]:t={}},list:function(n){return n=e(n),t[n]}}}(),d=function(t,e){s.register(t,e)},f=function(t,e){s.deregister(t,e)},h=function(t){for(var e=s.list(t),n=0;n<e.length;++n)e[n].render();null!==u&&u(t)},g=function(t){for(var e=s.list(t),n=0;n<e.length;++n)e[n].redraw();null!==u&&u(t)},p=function(t,e,n,r){if(e<=0)return t;var i=t.transition(r);return(e>=0||void 0!==e)&&(i=i.duration(e)),(n>=0||void 0!==n)&&(i=i.delay(n)),i},y=function(t,e,n,r){return t?function(t){return p(t,e,n,r)}:function(t){return t}},m={integers:function(t,e){return Math.abs(e-t)},ordinal:function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},fp:{}};m.fp.precision=function(t){var e=function(t,n){var r=Math.abs((n-t)/e.resolution);return o.isNegligible(r-Math.floor(r))?Math.floor(r):Math.ceil(r)};return e.resolution=t,e};const v={floor:function(t){return Math.floor(t)},ceil:function(t){return Math.ceil(t)},round:function(t){return Math.round(t)}},x=function(t,e,n){const r=t[e];t["_"+e]=r,t[e]=n},A=function(t){return t instanceof Object&&t.__dcFlag__&&!0};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;do{--n}while(n>=0&&e.item(n)!==this);return n>-1});const b={Exception:function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack}};b.Exception.prototype=Object.create(Error.prototype),b.Exception.prototype.constructor=b.Exception,b.InvalidStateException=function(){b.Exception.apply(this,arguments)},b.InvalidStateException.prototype=Object.create(b.Exception.prototype),b.InvalidStateException.prototype.constructor=b.InvalidStateException,b.BadArgumentException=function(){b.Exception.apply(this,arguments)},b.BadArgumentException.prototype=Object.create(b.Exception.prototype),b.BadArgumentException.prototype.constructor=b.BadArgumentException;const _=function(){const t={enableDebugLog:!1,warn:function(e){return console&&(console.warn?console.warn(e):console.log&&console.log(e)),t}},e={};return t.warnOnce=function(n){return e[n]||(e[n]=!0,_.warn(n)),t},t.debug=function(e){return t.enableDebugLog&&console&&(console.debug?console.debug(e):console.log&&console.log(e)),t},t.deprecate=function(e,n){var r=!1;return function(){return r||(t.warn(n),r=!0),e.apply(this,arguments)}},t.annotate=function(t,e){var n=!1;return function(){return n||(console.groupCollapsed(e),console.trace(),console.groupEnd(),n=!0),t.apply(this,arguments)}},t}(),D=(C=w=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],(k={}).defaultColors=function(t){return arguments.length?(C=t,k):(C===w&&_.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),C)},k);var k,w,C;const L={current:null,trigger:function(t,e){e?(L.current=t,setTimeout(function(){t===L.current&&t()},e)):t()}},S={RangedFilter:function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},TwoDimensionalFilter:function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},RangedTwoDimensionalFilter:function(t){if(null===t)return null;var e,n=t;return e=n[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],n.isFiltered=function(t){var n,r;return t instanceof Array?(n=t[0],r=t[1]):(n=t,r=e[0][1]),n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},n.filterType="RangedTwoDimensionalFilter",n},HierarchyFilter:function(t){if(null===t)return null;var e=t.slice(0);return e.isFiltered=function(t){if(!(e.length&&t&&t.length&&t.length>=e.length))return!1;for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},e}},E=function(){var t=1,n=1,r=0,i=0,a=null,l=Number,c=R,u=O,s=null,d=!1,f=3,h=.3,g=.8,p=!1,y=!0,m=!1;function v(o){o.each(function(o,v){o=o.map(l).sort(e.ascending);var x,A,b=e.select(this),_=o.length;if(0!==_){var D=o.quartiles=u(o),k=c&&c.call(this,o,v),w=k&&k.map(function(t){return o[t]}),C=k?e.range(0,k[0]).concat(e.range(k[1]+1,_)):e.range(_);y?(x=o[0],A=o[_-1]):(x=o[k[0]],A=o[k[1]]);var L=e.range(k[0],k[1]+1),S=e.scaleLinear().domain(a&&a.call(this,o,v)||[x,A]).range([n,0]),E=this.__chart__||e.scaleLinear().domain([0,1/0]).range(S.range());this.__chart__=S;var R=b.selectAll("line.center").data(w?[w]:[]);R.enter().insert("line","rect").attr("class","center").attr("x1",t/2).attr("y1",function(t){return E(t[0])}).attr("x2",t/2).attr("y2",function(t){return E(t[1])}).style("opacity",1e-6).transition().duration(r).delay(i).style("opacity",1).attr("y1",function(t){return S(t[0])}).attr("y2",function(t){return S(t[1])}),R.transition().duration(r).delay(i).style("opacity",1).attr("x1",t/2).attr("x2",t/2).attr("y1",function(t){return S(t[0])}).attr("y2",function(t){return S(t[1])}),R.exit().transition().duration(r).delay(i).style("opacity",1e-6).attr("y1",function(t){return S(t[0])}).attr("y2",function(t){return S(t[1])}).remove();var O=b.selectAll("rect.box").data([D]);O.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return E(t[2])}).attr("width",t).attr("height",function(t){return E(t[0])-E(t[2])}).style("fill-opacity",d?.1:1).transition().duration(r).delay(i).attr("y",function(t){return S(t[2])}).attr("height",function(t){return S(t[0])-S(t[2])}),O.transition().duration(r).delay(i).attr("width",t).attr("y",function(t){return S(t[2])}).attr("height",function(t){return S(t[0])-S(t[2])});var B=b.selectAll("line.median").data([D[1]]);B.enter().append("line").attr("class","median").attr("x1",0).attr("y1",E).attr("x2",t).attr("y2",E).transition().duration(r).delay(i).attr("y1",S).attr("y2",S),B.transition().duration(r).delay(i).attr("x1",0).attr("x2",t).attr("y1",S).attr("y2",S);var T=b.selectAll("line.whisker").data(w||[]);if(T.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",E).attr("x2",t).attr("y2",E).style("opacity",1e-6).transition().duration(r).delay(i).attr("y1",S).attr("y2",S).style("opacity",1),T.transition().duration(r).delay(i).attr("x1",0).attr("x2",t).attr("y1",S).attr("y2",S).style("opacity",1),T.exit().transition().duration(r).delay(i).attr("y1",S).attr("y2",S).style("opacity",1e-6).remove(),y){var M=m?"outlierBold":"outlier",F=m?3:5,N=m?function(){return Math.floor(Math.random()*(t*g)+1+(t-t*g)/2)}:function(){return t/2},H=b.selectAll("circle."+M).data(C,Number);H.enter().insert("circle","text").attr("class",M).attr("r",F).attr("cx",N).attr("cy",function(t){return E(o[t])}).style("opacity",1e-6).transition().duration(r).delay(i).attr("cy",function(t){return S(o[t])}).style("opacity",.6),p&&(H.selectAll("title").remove(),H.append("title").text(function(t){return o[t]})),H.transition().duration(r).delay(i).attr("cx",N).attr("cy",function(t){return S(o[t])}).style("opacity",.6),H.exit().transition().duration(r).delay(i).attr("cy",0).style("opacity",1e-6).remove()}if(d){var G=b.selectAll("circle.data").data(L);G.enter().insert("circle","text").attr("class","data").attr("r",f).attr("cx",function(){return Math.floor(Math.random()*(t*g)+1+(t-t*g)/2)}).attr("cy",function(t){return E(o[t])}).style("opacity",1e-6).transition().duration(r).delay(i).attr("cy",function(t){return S(o[t])}).style("opacity",h),p&&(G.selectAll("title").remove(),G.append("title").text(function(t){return o[t]})),G.transition().duration(r).delay(i).attr("cx",function(){return Math.floor(Math.random()*(t*g)+1+(t-t*g)/2)}).attr("cy",function(t){return S(o[t])}).style("opacity",h),G.exit().transition().duration(r).delay(i).attr("cy",0).style("opacity",1e-6).remove()}var P=s||S.tickFormat(8),U=b.selectAll("text.box").data(D);U.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(e,n){return 1&n?t:0}).attr("y",E).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(P).transition().duration(r).delay(i).attr("y",S),U.transition().duration(r).delay(i).text(P).attr("x",function(e,n){return 1&n?t:0}).attr("y",S);var Y=b.selectAll("text.whisker").data(w||[]);Y.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",t).attr("y",E).text(P).style("opacity",1e-6).transition().duration(r).delay(i).attr("y",S).style("opacity",1),Y.transition().duration(r).delay(i).text(P).attr("x",t).attr("y",S).style("opacity",1),Y.exit().transition().duration(r).delay(i).attr("y",S).style("opacity",1e-6).remove(),delete o.quartiles}}),e.timerFlush()}return v.width=function(e){return arguments.length?(t=e,v):t},v.height=function(t){return arguments.length?(n=t,v):n},v.tickFormat=function(t){return arguments.length?(s=t,v):s},v.showOutliers=function(t){return arguments.length?(y=t,v):y},v.boldOutlier=function(t){return arguments.length?(m=t,v):m},v.renderDataPoints=function(t){return arguments.length?(d=t,v):d},v.renderTitle=function(t){return arguments.length?(p=t,v):p},v.dataOpacity=function(t){return arguments.length?(h=t,v):h},v.dataWidthPortion=function(t){return arguments.length?(g=t,v):g},v.duration=function(t){return arguments.length?(r=t,v):r},v.domain=function(t){return arguments.length?(a=null===t?t:"function"==typeof t?t:o.constant(t),v):a},v.value=function(t){return arguments.length?(l=t,v):l},v.whiskers=function(t){return arguments.length?(c=t,v):c},v.quartiles=function(t){return arguments.length?(u=t,v):u},v};function R(t){return[0,t.length-1]}function O(t){return[e.quantile(t,.25),e.quantile(t,.5),e.quantile(t,.75)]}const B=function(t){var r,l,c,u,s,p;t.__dcFlag__=o.uniqueId();var y,m,v,x,D,k=200,w=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>k?e:k},C=w,S=200,E=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>S?e:S},R=E,O=!1,B=a("key"),T=a("value"),M=a("key"),F=a("key"),N=!1,H=function(e){return t.keyAccessor()(e)+": "+t.valueAccessor()(e)},G=!0,P=!1,U=750,Y=0,z=i.filters,V=["dimension","group"],I=n.DEFAULT_CHART_GROUP,j=e.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),X=[],q=function(t,e){return 0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0;if(r<=t&&r>=t)return!0}return!1}):t.filterExact(e[0]),e},W=function(t){return t.all()};function K(){s&&(O?s.attr("viewBox")||s.attr("viewBox","0 0 "+t.width()+" "+t.height()):s.attr("width",t.width()).attr("height",t.height()))}function Z(e){if(!t[e]||!t[e]())throw new b.InvalidStateException("Mandatory attribute chart."+e+" is missing on chart[#"+t.anchorName()+"]")}t.height=function(e){return arguments.length?(R=e?"function"==typeof e?e:o.constant(e):E,m=void 0,t):(o.isNumber(m)||(m=R(u.node())),m)},t.width=function(e){return arguments.length?(C=e?"function"==typeof e?e:o.constant(e):w,y=void 0,t):(o.isNumber(y)||(y=C(u.node())),y)},t.minWidth=function(e){return arguments.length?(k=e,t):k},t.minHeight=function(e){return arguments.length?(S=e,t):S},t.useViewBoxResizing=function(e){return arguments.length?(O=e,t):O},t.dimension=function(e){return arguments.length?(r=e,t.expireCache(),t):r},t.data=function(e){return arguments.length?(W="function"==typeof e?e:o.constant(e),t.expireCache(),t):W.call(t,l)},t.group=function(e,n){return arguments.length?(l=e,t._groupName=n,t.expireCache(),t):l},t.ordering=function(e){return arguments.length?(F=e,v=crossfilter.quicksort.by(F),t.expireCache(),t):F},t._computeOrderedGroups=function(t){var e=t.slice(0);return e.length<=1?e:(v||(v=crossfilter.quicksort.by(F)),v(e,0,e.length))},t.filterAll=function(){return t.filter(null)},t.select=function(t){return u.select(t)},t.selectAll=function(t){return u?u.selectAll(t):null},t.anchor=function(r,i){if(!arguments.length)return c;if(A(r))(c=r.anchor()).children&&(c="#"+r.anchorName()),u=r.root(),p=!0;else{if(!r)throw new b.BadArgumentException("parent must be defined");c=r.select&&r.classed?r.node():r,(u=e.select(c)).classed(n.CHART_CLASS,!0),d(t,i),p=!1}return I=i,t},t.anchorName=function(){var e=t.anchor();return e&&e.id?e.id:e&&e.replace?e.replace("#",""):"dc-chart"+t.chartID()},t.root=function(e){return arguments.length?(u=e,t):u},t.svg=function(e){return arguments.length?(s=e,t):s},t.resetSvg=function(){return t.select("svg").remove(),s=t.root().append("svg"),K(),s},t.filterPrinter=function(e){return arguments.length?(z=e,t):z},t.controlsUseVisibility=function(e){return arguments.length?(P=e,t):P},t.turnOnControls=function(){if(u){var e=t.controlsUseVisibility()?"visibility":"display";t.selectAll(".reset").style(e,null),t.selectAll(".filter").text(z(t.filters())).style(e,null)}return t},t.turnOffControls=function(){if(u){var e=t.controlsUseVisibility()?"visibility":"display",n=t.controlsUseVisibility()?"hidden":"none";t.selectAll(".reset").style(e,n),t.selectAll(".filter").style(e,n).text(t.filter())}return t},t.transitionDuration=function(e){return arguments.length?(U=e,t):U},t.transitionDelay=function(e){return arguments.length?(Y=e,t):Y},t._mandatoryAttributes=function(e){return arguments.length?(V=e,t):V},t.render=function(){m=y=void 0,j.call("preRender",t,t),V&&V.forEach(Z);var e=t._doRender();return x&&x.render(),t._activateRenderlets("postRender"),e},t._activateRenderlets=function(e){j.call("pretransition",t,t),t.transitionDuration()>0&&s?s.transition().duration(t.transitionDuration()).delay(t.transitionDelay()).on("end",function(){j.call("renderlet",t,t),e&&j.call(e,t,t)}):(j.call("renderlet",t,t),e&&j.call(e,t,t))},t.redraw=function(){K(),j.call("preRedraw",t,t);var e=t._doRedraw();return x&&x.render(),t._activateRenderlets("postRedraw"),e},t.commitHandler=function(e){return arguments.length?(D=e,t):D},t.redrawGroup=function(){return D?D(!1,function(e,n){e?console.log(e):g(t.chartGroup())}):g(t.chartGroup()),t},t.renderGroup=function(){return D?D(!1,function(e,n){e?console.log(e):h(t.chartGroup())}):h(t.chartGroup()),t},t._invokeFilteredListener=function(e){void 0!==e&&j.call("filtered",t,t,e)},t._invokeZoomedListener=function(){j.call("zoomed",t,t)};var J=function(t,e){return null===e||void 0===e?t.length>0:t.some(function(t){return e<=t&&e>=t})};t.hasFilterHandler=function(e){return arguments.length?(J=e,t):J},t.hasFilter=function(t){return J(X,t)};var Q=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};t.removeFilterHandler=function(e){return arguments.length?(Q=e,t):Q};var $=function(t,e){return t.push(e),t};t.addFilterHandler=function(e){return arguments.length?($=e,t):$};var tt=function(t){return[]};return t.resetFilterHandler=function(e){return arguments.length?(tt=e,t):tt},t.replaceFilter=function(e){return X=tt(X),t.filter(e),t},t.filter=function(e){if(!arguments.length)return X.length>0?X[0]:null;var n=X;return e instanceof Array&&e[0]instanceof Array&&!e.isFiltered?e[0].forEach(function(t){n=J(n,t)?Q(n,t):$(n,t)}):n=null===e?tt(n):J(n,e)?Q(n,e):$(n,e),X=function(e){if(t.dimension()&&t.dimension().filter){var n=q(t.dimension(),e);n&&(e=n)}return e}(n),t._invokeFilteredListener(e),null!==u&&t.hasFilter()?t.turnOnControls():t.turnOffControls(),t},t.filters=function(){return X},t.highlightSelected=function(t){e.select(t).classed(n.SELECTED_CLASS,!0),e.select(t).classed(n.DESELECTED_CLASS,!1)},t.fadeDeselected=function(t){e.select(t).classed(n.SELECTED_CLASS,!1),e.select(t).classed(n.DESELECTED_CLASS,!0)},t.resetHighlight=function(t){e.select(t).classed(n.SELECTED_CLASS,!1),e.select(t).classed(n.DESELECTED_CLASS,!1)},t.onClick=function(e){var n=t.keyAccessor()(e);L.trigger(function(){t.filter(n),t.redrawGroup()})},t.filterHandler=function(e){return arguments.length?(q=e,t):q},t._doRender=function(){return t},t._doRedraw=function(){return t},t.legendables=function(){return[]},t.legendHighlight=function(){},t.legendReset=function(){},t.legendToggle=function(){},t.isLegendableHidden=function(){return!1},t.keyAccessor=function(e){return arguments.length?(B=e,t):B},t.valueAccessor=function(e){return arguments.length?(T=e,t):T},t.label=function(e,n){return arguments.length?(M=e,(void 0===n||n)&&(N=!0),t):M},t.renderLabel=function(e){return arguments.length?(N=e,t):N},t.title=function(e){return arguments.length?(H=e,t):H},t.renderTitle=function(e){return arguments.length?(G=e,t):G},t.renderlet=_.deprecate(function(e){return t.on("renderlet."+o.uniqueId(),e),t},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),t.chartGroup=function(e){return arguments.length?(p||f(t,I),I=e,p||d(t,I),t):I},t.expireCache=function(){return t},t.legend=function(e){return arguments.length?((x=e).parent(t),t):x},t.chartID=function(){return t.__dcFlag__},t.options=function(e){var n=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var r in e)"function"==typeof t[r]?e[r]instanceof Array&&-1!==n.indexOf(r)?t[r].apply(t,e[r]):t[r].call(t,e[r]):_.debug("Not a valid option setter name: "+r);return t},t.on=function(e,n){return j.on(e,n),t},t},T=function(t){var n,r=e.scaleOrdinal(D.defaultColors()),i=!0,a=function(e){return t.keyAccessor()(e)};return t.colors=function(n){return arguments.length?(r=n instanceof Array?e.scaleQuantize().range(n):"function"==typeof n?n:o.constant(n),t):r},t.ordinalColors=function(n){return t.colors(e.scaleOrdinal().range(n))},t.linearColors=function(n){return t.colors(e.scaleLinear().range(n).interpolate(e.interpolateHcl))},t.colorAccessor=function(e){return arguments.length?(a=e,i=!1,t):a},t.defaultColorAccessor=function(){return i},t.colorDomain=function(e){return arguments.length?(r.domain(e),t):r.domain()},t.calculateColorDomain=function(){var n=[e.min(t.data(),t.colorAccessor()),e.max(t.data(),t.colorAccessor())];return r.domain(n),t},t.getColor=function(t,e){return n?n.call(this,t,e):r(a.call(this,t,e))},t.colorCalculator=function(e){return arguments.length?(n=e,t):n||t.getColor},t},M=function(t){var n=.3,r=10,i=!1,a=!1;t.BUBBLE_NODE_CLASS="node",t.BUBBLE_CLASS="bubble",t.MIN_RADIUS=10,(t=T(t)).renderLabel(!0),t.data(function(n){var r=n.all();if(i){var a=t.radiusValueAccessor();r.sort(function(t,n){return e.descending(a(t),a(n))})}return r});var o=e.scaleLinear().domain([0,100]),l=function(t){return t.r};t.r=function(e){return arguments.length?(o=e,t):o},t.elasticRadius=function(e){return arguments.length?(a=e,t):a},t.calculateRadiusDomain=function(){a&&t.r().domain([t.rMin(),t.rMax()])},t.radiusValueAccessor=function(e){return arguments.length?(l=e,t):l},t.rMin=function(){return e.min(t.data(),function(e){return t.radiusValueAccessor()(e)})},t.rMax=function(){return e.max(t.data(),function(e){return t.radiusValueAccessor()(e)})},t.bubbleR=function(e){var n=t.radiusValueAccessor()(e),r=t.r()(n);return(isNaN(r)||n<=0)&&(r=0),r};var c=function(e){return t.label()(e)},u=function(e){return t.bubbleR(e)>r},s=function(t){return u(t)?1:0},d=function(t){return u(t)?"all":"none"};t._doRenderLabel=function(e){if(t.renderLabel()){var n=e.select("text");n.empty()&&(n=e.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick)),n.attr("opacity",0).attr("pointer-events",d).text(c),p(n,t.transitionDuration(),t.transitionDelay()).attr("opacity",s)}},t.doUpdateLabels=function(e){if(t.renderLabel()){var n=e.select("text").attr("pointer-events",d).text(c);p(n,t.transitionDuration(),t.transitionDelay()).attr("opacity",s)}};var f=function(e){return t.title()(e)};return t._doRenderTitles=function(e){t.renderTitle()&&(e.select("title").empty()&&e.append("title").text(f))},t.doUpdateTitles=function(e){t.renderTitle()&&e.select("title").text(f)},t.sortBubbleSize=function(e){return arguments.length?(i=e,t):i},t.minRadius=function(e){return arguments.length?(t.MIN_RADIUS=e,t):t.MIN_RADIUS},t.minRadiusWithLabel=function(e){return arguments.length?(r=e,t):r},t.maxBubbleRelativeSize=function(e){return arguments.length?(n=e,t):n},t.fadeDeselectedArea=function(e){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(){t.resetHighlight(this)})},t.isSelectedNode=function(e){return t.hasFilter(e.key)},t.onClick=function(e){var n=e.key;L.trigger(function(){t.filter(n),t.redrawGroup()})},t},F=function(t){var e={top:10,right:50,bottom:30,left:30};return t.margins=function(n){return arguments.length?(e=n,t):e},t.effectiveWidth=function(){return t.width()-t.margins().left-t.margins().right},t.effectiveHeight=function(){return t.height()-t.margins().top-t.margins().bottom},t},N=function(t){var r,i,a,l,c,u,s="grid-line",d="vertical";(t=T(F(B(t)))).colors(e.scaleOrdinal(e.schemeCategory10)),t._mandatoryAttributes().push("x");var f,h,g,v,A,b,D,k,w,C=e.axisBottom(),E=m.integers,R=0,O=e.timeDay,M=!1,N=0,H=null,G=0,P=!1,U=0,Y=e.brushX(),z=!0,V=!1,I=!1,j=!1,X=!1,q=[1,1/0],W=!0,K=e.zoom().on("zoom",function(){if(!e.event.sourceEvent)return;if(e.event.sourceEvent.type&&-1!==["start","zoom","end"].indexOf(e.event.sourceEvent.type))return;var n=e.event.transform.rescaleX(c).domain();t.focus(n,!1)}),Z=e.zoom().on("zoom",null),J=!1,Q=!1,$=0,tt=.5,et=0,nt=!1;function rt(n,r){t.isOrdinal()?(l.bandwidth||(_.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),l=e.scaleBand().domain(l.domain())),(t.elasticX()||0===l.domain().length)&&l.domain(t._ordinalXDomain())):t.elasticX()&&l.domain([t.xAxisMin(),t.xAxisMax()]);var i=l.domain();!r&&o.arraysEqual(h,i)||t.rescale(),h=i,t.isOrdinal()?l.range([0,t.xAxisLength()]).paddingInner(et).paddingOuter(t._useOuterPadding()?tt:0):l.range([0,t.xAxisLength()]),C=C.scale(t.x()),function(e){var n=e.select("g."+d);if(j){n.empty()&&(n=e.insert("g",":first-child").attr("class",s+" "+d).attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var r=C.tickValues()?C.tickValues():"function"==typeof l.ticks?l.ticks.apply(l,C.tickArguments()):l.domain(),i=n.selectAll("line").data(r),a=i.enter().append("line").attr("x1",function(t){return l(t)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(t){return l(t)}).attr("y2",0).attr("opacity",0);p(a,t.transitionDuration(),t.transitionDelay()).attr("opacity",.5),p(i,t.transitionDuration(),t.transitionDelay()).attr("x1",function(t){return l(t)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(t){return l(t)}).attr("y2",0),i.exit().remove()}else n.selectAll("line").remove()}(n)}function it(){return nt?e.axisRight():e.axisLeft()}function at(){return t.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}function ot(){var e=o.appendOrSelect(r,"defs"),n=at(),i=o.appendOrSelect(e,"#"+n,"clipPath").attr("id",n),a=2*$;o.appendOrSelect(i,"rect").attr("width",t.xAxisLength()+a).attr("height",t.yAxisHeight()+a).attr("transform","translate(-"+$+", -"+$+")")}function lt(e){t.isOrdinal()&&(z=!1),rt(t.g(),e),t._prepareYAxis(t.g()),t.plotData(),(t.elasticX()||X||e)&&t.renderXAxis(t.g()),(t.elasticY()||X||e)&&t.renderYAxis(t.g()),e?t.renderBrush(t.g(),!1):t.redrawBrush(t.filter(),X),t.fadeDeselectedArea(t.filter()),X=!1}function ct(e,r){var i,a;(a=e)instanceof Array&&a.length>1?(t.x().domain(e),i=S.RangedFilter(e[0],e[1])):(t.x().domain(u),i=null),t.replaceFilter(i),t.rescale(),t.redraw(),r||(k&&!o.arraysEqual(t.filter(),k.filter())&&L.trigger(function(){k.replaceFilter(i),k.redraw()}),t._invokeZoomedListener(),L.trigger(function(){t.redrawGroup()},n.EVENT_DELAY))}function ut(){var n,r,i,a,o;K&&K.transform(t.root(),(n=t.x().domain(),i=c,a=((r=u)[1]-r[0])/(n[1]-n[0]),o=-1*i(n[0]),e.zoomIdentity.scale(a).translate(o,0)))}function st(t,e){return t&&2===t.length&&e&&2===e.length?((t[0]>e[1]||t[1]<e[0])&&console.warn("Could not intersect extents, will reset"),[t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1]]):t}return t.rescale=function(){return D=void 0,X=!0,t},t.resizing=function(){return X},t.rangeChart=function(e){return arguments.length?((k=e).focusChart(t),t):k},t.zoomScale=function(e){return arguments.length?(q=e,t):q},t.zoomOutRestrict=function(e){return arguments.length?(W=e,t):W},t._generateG=function(e){r=void 0===e?t.svg():e;var n=window.location.href.split("#")[0];return i=r.append("g"),a=i.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url("+n+"#"+at()+")"),i},t.g=function(e){return arguments.length?(i=e,t):i},t.mouseZoomable=function(e){return arguments.length?(Q=e,t):Q},t.chartBodyG=function(e){return arguments.length?(a=e,t):a},t.x=function(e){return arguments.length?(u=(l=e).domain(),t.rescale(),t):l},t.xOriginalDomain=function(){return u},t.xUnits=function(e){return arguments.length?(E=e,t):E},t.xAxis=function(e){return arguments.length?(C=e,t):C},t.elasticX=function(e){return arguments.length?(M=e,t):M},t.xAxisPadding=function(e){return arguments.length?(R=e,t):R},t.xAxisPaddingUnit=function(e){return arguments.length?(O=e,t):O},t.xUnitCount=function(){return void 0===D&&(t.isOrdinal()?D=t.x().domain().length:(D=t.xUnits()(t.x().domain()[0],t.x().domain()[1]))instanceof Array&&(D=D.length)),D},t.useRightYAxis=function(e){return arguments.length?(nt!==e&&H&&_.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),nt=e,t):nt},t.isOrdinal=function(){return t.xUnits()===m.ordinal},t._useOuterPadding=function(){return!0},t._ordinalXDomain=function(){return t._computeOrderedGroups(t.data()).map(t.keyAccessor())},t.renderXAxis=function(e){var n=e.select("g.x");n.empty()&&(n=e.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t._xAxisY()+")"));var r=e.select("text.x-axis-label");r.empty()&&t.xAxisLabel()&&(r=e.append("text").attr("class","x-axis-label").attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-N)+")").attr("text-anchor","middle")),t.xAxisLabel()&&r.text()!==t.xAxisLabel()&&r.text(t.xAxisLabel()),p(n,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+t.margins().left+","+t._xAxisY()+")").call(C),p(r,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-N)+")")},t._xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(e,n){return arguments.length?(f=e,t.margins().bottom-=N,N=void 0===n?12:n,t.margins().bottom+=N,t):f},t._prepareYAxis=function(n){if(void 0===g||t.elasticY()){void 0===g&&(g=e.scaleLinear());var r=t.yAxisMin()||0,i=t.yAxisMax()||0;g.domain([r,i]).rangeRound([t.yAxisHeight(),0])}g.range([t.yAxisHeight(),0]),H||(H=it()),H.scale(g),t._renderHorizontalGridLinesForAxis(n,g,H)},t.renderYAxisLabel=function(e,n,r,i){i=i||U;var a=t.g().select("text.y-axis-label."+e+"-label"),o=t.margins().top+t.yAxisHeight()/2;a.empty()&&n&&(a=t.g().append("text").attr("transform","translate("+i+","+o+"),rotate("+r+")").attr("class","y-axis-label "+e+"-label").attr("text-anchor","middle").text(n)),n&&a.text()!==n&&a.text(n),p(a,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+i+","+o+"),rotate("+r+")")},t.renderYAxisAt=function(e,n,r){var i=t.g().select("g."+e);i.empty()&&(i=t.g().append("g").attr("class","axis "+e).attr("transform","translate("+r+","+t.margins().top+")")),p(i,t.transitionDuration(),t.transitionDelay()).attr("transform","translate("+r+","+t.margins().top+")").call(n)},t.renderYAxis=function(){var e=nt?t.width()-t.margins().right:t._yAxisX();t.renderYAxisAt("y",H,e);var n=nt?t.width()-U:U,r=nt?90:-90;t.renderYAxisLabel("y",t.yAxisLabel(),r,n)},t._renderHorizontalGridLinesForAxis=function(e,n,r){var i=e.select("g.horizontal");if(I){var a=r.tickValues()?r.tickValues():n.ticks?n.ticks.apply(n,r.tickArguments()):n.domain();i.empty()&&(i=e.insert("g",":first-child").attr("class",s+" horizontal").attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var o=i.selectAll("line").data(a),l=o.enter().append("line").attr("x1",1).attr("y1",function(t){return n(t)}).attr("x2",t.xAxisLength()).attr("y2",function(t){return n(t)}).attr("opacity",0);p(l,t.transitionDuration(),t.transitionDelay()).attr("opacity",.5),p(o,t.transitionDuration(),t.transitionDelay()).attr("x1",1).attr("y1",function(t){return n(t)}).attr("x2",t.xAxisLength()).attr("y2",function(t){return n(t)}),o.exit().remove()}else i.selectAll("line").remove()},t._yAxisX=function(){return t.useRightYAxis()?t.width()-t.margins().right:t.margins().left},t.yAxisLabel=function(e,n){return arguments.length?(v=e,t.margins().left-=U,U=void 0===n?12:n,t.margins().left+=U,t):v},t.y=function(e){return arguments.length?(g=e,t.rescale(),t):g},t.yAxis=function(e){return arguments.length?(H=e,t):(H||(H=it()),H)},t.elasticY=function(e){return arguments.length?(P=e,t):P},t.renderHorizontalGridLines=function(e){return arguments.length?(I=e,t):I},t.renderVerticalGridLines=function(e){return arguments.length?(j=e,t):j},t.xAxisMin=function(){var n=e.min(t.data(),function(e){return t.keyAccessor()(e)});return o.subtract(n,R,O)},t.xAxisMax=function(){var n=e.max(t.data(),function(e){return t.keyAccessor()(e)});return o.add(n,R,O)},t.yAxisMin=function(){var n=e.min(t.data(),function(e){return t.valueAccessor()(e)});return o.subtract(n,G)},t.yAxisMax=function(){var n=e.max(t.data(),function(e){return t.valueAccessor()(e)});return o.add(n,G)},t.yAxisPadding=function(e){return arguments.length?(G=e,t):G},t.yAxisHeight=function(){return t.effectiveHeight()},t.round=function(e){return arguments.length?(b=e,t):b},t._rangeBandPadding=function(e){return arguments.length?(et=e,t):et},t._outerRangeBandPadding=function(e){return arguments.length?(tt=e,t):tt},x(t,"filter",function(e){return arguments.length?(t._filter(e),t.redrawBrush(e,!1),t):t._filter()}),t.brush=function(e){return arguments.length?(Y=e,t):Y},t.renderBrush=function(e,n){z&&(Y.on("start brush end",t._brushing),A=e.append("g").attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")"),t.setBrushExtents(),t.createBrushHandlePaths(A,n),t.redrawBrush(t.filter(),n))},t.createBrushHandlePaths=function(e){var n=e.selectAll("path.custom-brush-handle").data([{type:"w"},{type:"e"}]);(n=n.enter().append("path").attr("class","custom-brush-handle").merge(n)).attr("d",t.resizeHandlePath)},t.extendBrush=function(e){return e&&t.round()&&(e[0]=t.round()(e[0]),e[1]=t.round()(e[1])),e},t.brushIsEmpty=function(t){return!t||t[1]<=t[0]},t._brushing=function(){if(e.event.sourceEvent&&(!e.event.sourceEvent.type||-1===["start","brush","end"].indexOf(e.event.sourceEvent.type))){var r=e.event.selection;r&&(r=r.map(t.x().invert)),r=t.extendBrush(r),t.redrawBrush(r,!1);var i=t.brushIsEmpty(r)?null:S.RangedFilter(r[0],r[1]);L.trigger(function(){t.applyBrushSelection(i)},n.EVENT_DELAY)}},t.applyBrushSelection=function(e){t.replaceFilter(e),t.redrawGroup()},t.setBrushExtents=function(e){Y.extent([[0,0],[t.effectiveWidth(),t.effectiveHeight()]]),A.call(Y)},t.redrawBrush=function(e,n){if(z&&A)if(X&&t.setBrushExtents(n),e){var r=[l(e[0]),l(e[1])],i=y(n,t.transitionDuration(),t.transitionDelay())(A);i.call(Y.move,r),i.selectAll("path.custom-brush-handle").attr("display",null).attr("transform",function(t,n){return"translate("+l(e[n])+", 0)"}).attr("d",t.resizeHandlePath)}else A.call(Y.move,null),A.selectAll("path.custom-brush-handle").attr("display","none");t.fadeDeselectedArea(e)},t.fadeDeselectedArea=function(t){},t.resizeHandlePath=function(e){var n=+("e"===(e=e.type)),r=n?1:-1,i=t.effectiveHeight()/3;return"M"+.5*r+","+i+"A6,6 0 0 "+n+" "+6.5*r+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+n+" "+.5*r+","+2*i+"ZM"+2.5*r+","+(i+8)+"V"+(2*i-8)+"M"+4.5*r+","+(i+8)+"V"+(2*i-8)},t.clipPadding=function(e){return arguments.length?($=e,t):$},t._preprocessData=function(){},t._doRender=function(){return t.resetSvg(),t._preprocessData(),t._generateG(),ot(),lt(!0),c=l.copy(),Q?t._enableMouseZoom():J&&t._disableMouseZoom(),t},t._doRedraw=function(){return t._preprocessData(),lt(!1),ot(),t},t._enableMouseZoom=function(){J=!0;var e=[[0,0],[t.effectiveWidth(),t.effectiveHeight()]];if(K.scaleExtent(q).extent(e).duration(t.transitionDuration()),W){var n=Math.max(q[0],1);K.translateExtent(e).scaleExtent([n,q[1]])}t.root().call(K),ut()},t._disableMouseZoom=function(){t.root().call(Z)},t.focus=function(t,e){W&&(t=st(t,u),k&&(t=st(t,k.x().domain()))),ct(t,e),ut()},t.refocused=function(){return!o.arraysEqual(t.x().domain(),u)},t.focusChart=function(e){return arguments.length?(w=e,t.on("filtered.dcjs-range-chart",function(t){t.filter()?o.arraysEqual(t.filter(),w.filter())||L.trigger(function(){w.focus(t.filter(),!0)}):L.trigger(function(){w.x().domain(w.xOriginalDomain(),!0)})}),t):w},t.brushOn=function(e){return arguments.length?(z=e,t):z},t.parentBrushOn=function(e){return arguments.length?(V=e,t):V},t.gBrush=function(){return A},t},H=function(t){var n=1/0,r=!0,i="Others";t.ordering(function(t){return-t.value});var a=function(n,r){var i=e.sum(r,t.valueAccessor()),a=r.map(t.keyAccessor());return i>0?n.concat([{others:a,key:t.othersLabel(),value:i}]):n};return t.cappedKeyAccessor=function(e,n){return e.others?e.key:t.keyAccessor()(e,n)},t.cappedValueAccessor=function(e,n){return e.others?e.value:t.valueAccessor()(e,n)},t.data(function(e){if(n===1/0)return t._computeOrderedGroups(e.all());var i,o=e.all();if(o=t._computeOrderedGroups(o),n)if(r)i=o.slice(n),o=o.slice(0,n);else{var l=Math.max(0,o.length-n);i=o.slice(0,l),o=o.slice(l)}return a?a(o,i):o}),t.cap=function(e){return arguments.length?(n=e,t):n},t.takeFront=function(e){return arguments.length?(r=e,t):r},t.othersLabel=function(e){return arguments.length?(i=e,t):i},t.othersGrouper=function(e){return arguments.length?(a=e,t):a},x(t,"onClick",function(e){e.others&&t.filter([e.others]),t._onClick(e)}),t},G=function(t){function n(e,n){var r=e.accessor||t.valueAccessor();e.name=String(e.name||n);var i=e.group.all().map(function(n,i){return{x:t.keyAccessor()(n,i),y:e.hidden?null:r(n,i),data:n,layer:e.name,hidden:e.hidden}});e.domainValues=i.filter(function(){if(!t.x())return o.constant(!0);var e=t.x().domain();if(t.isOrdinal())return function(){return!0};if(t.elasticX())return function(){return!0};return function(t){return t.x>=e[0]&&t.x<=e[e.length-1]}}()),e.values=t.evadeDomainFilter()?i:e.domainValues}var r=e.stack(),i=[],l={},c=!1,u=!1;function s(t){var e=i.map(a("name")).indexOf(t);return i[e]}function d(){var e=t.data().map(function(t){return t.domainValues});return Array.prototype.concat.apply([],e)}function f(t){return!t.hidden}return t.stack=function(e,n,r){if(!arguments.length)return i;arguments.length<=2&&(r=n);var a={group:e};return"string"==typeof n&&(a.name=n),"function"==typeof r&&(a.accessor=r),i.push(a),t},x(t,"group",function(e,n,r){return arguments.length?(i=[],l={},t.stack(e,n),r&&t.valueAccessor(r),t._group(e,n)):t._group()}),t.hidableStacks=function(e){return arguments.length?(c=e,t):c},t.hideStack=function(e){var n=s(e);return n&&(n.hidden=!0),t},t.showStack=function(e){var n=s(e);return n&&(n.hidden=!1),t},t.getValueAccessorByIndex=function(e){return i[e].accessor||t.valueAccessor()},t.yAxisMin=function(){var n=e.min(d(),function(t){return t.y<0?t.y+t.y0:t.y0});return o.subtract(n,t.yAxisPadding())},t.yAxisMax=function(){var n=e.max(d(),function(t){return t.y>0?t.y+t.y0:t.y0});return o.add(n,t.yAxisPadding())},t.xAxisMin=function(){var n=e.min(d(),a("x"));return o.subtract(n,t.xAxisPadding(),t.xAxisPaddingUnit())},t.xAxisMax=function(){var n=e.max(d(),a("x"));return o.add(n,t.xAxisPadding(),t.xAxisPaddingUnit())},x(t,"title",function(e,n){return e?"function"==typeof e?t._title(e):e===t._groupName&&"function"==typeof n?t._title(n):"function"!=typeof n?l[e]||t._title():(l[e]=n,t):t._title()}),t.stackLayout=function(e){return arguments.length?(r=e,t):r},t.evadeDomainFilter=function(e){return arguments.length?(u=e,t):u},t.data(function(){var e=i.filter(f);if(!e.length)return[];e.forEach(n);var r=e[0].values.map(function(t,n){var r={x:t.x};return e.forEach(function(t){r[t.name]=t.values[n].y}),r}),a=e.map(function(t){return t.name});return t.stackLayout().keys(a)(r).forEach(function(t,n){t.forEach(function(t,r){e[n].values[r].y0=t[0],e[n].values[r].y1=t[1]})}),e}),t._ordinalXDomain=function(){var e=d().map(a("data"));return t._computeOrderedGroups(e).map(t.keyAccessor())},t.colorAccessor(function(t){return this.layer||this.name||t.name||t.layer}),t.legendables=function(){return i.map(function(e,n){return{chart:t,name:e.name,hidden:e.hidden||!1,color:t.getColor.call(e,e.values,n)}})},t.isLegendableHidden=function(t){var e=s(t.name);return!!e&&e.hidden},t.legendToggle=function(e){c&&(t.isLegendableHidden(e)?t.showStack(e.name):t.hideStack(e.name),t.renderGroup())},t},P=function(t,n){var r,i="sub",a=N({}),l=[],c={},u=!1,s=!0,d=!1,f=e.axisRight(),h=0,g=12,p=!1;function y(t,e){t._generateG(a.g()),t.g().attr("class",i+" _"+e)}function m(){return l.filter(function(t){return!t.useRightYAxis()})}function v(){return l.filter(function(t){return t.useRightYAxis()})}function A(t){return t.map(function(t){return t.yAxisMin()})}function b(t){return t.map(function(t){return t.yAxisMax()})}return a._mandatoryAttributes([]),a.transitionDuration(500),a.transitionDelay(0),x(a,"_generateG",function(){for(var t=this.__generateG(),e=0;e<l.length;++e){var n=l[e];y(n,e),n.dimension()||n.dimension(a.dimension()),n.group()||n.group(a.group()),n.chartGroup(a.chartGroup()),n.svg(a.svg()),n.xUnits(a.xUnits()),n.transitionDuration(a.transitionDuration(),a.transitionDelay()),n.parentBrushOn(a.brushOn()),n.brushOn(!1),n.renderTitle(a.renderTitle()),n.elasticX(a.elasticX())}return t}),a.on("filtered.dcjs-composite-chart",function(t){for(var e=0;e<l.length;++e)l[e].replaceFilter(a.filter())}),a._prepareYAxis=function(){var t=0!==m().length,n=0!==v().length,i=function(t,n){var r,i,l,c,u;t&&(r=e.min(A(m())),i=o.add(e.max(b(m())),a.yAxisPadding()));n&&(l=e.min(A(v())),c=o.add(e.max(b(v())),a.yAxisPadding()));a.alignYAxes()&&t&&n&&(u=function(t,e,n,r){var i=(r-n)/(e-t);return{lyAxisMin:Math.min(t,n/i),lyAxisMax:Math.max(e,r/i),ryAxisMin:Math.min(n,t*i),ryAxisMax:Math.max(r,e*i)}}(r,i,l,c));return u||{lyAxisMin:r,lyAxisMax:i,ryAxisMin:l,ryAxisMax:c}}(t,n);t&&function(t){var n=void 0===a.y()||a.elasticY(),r=n||a.resizing();void 0===a.y()&&a.y(e.scaleLinear());n&&a.y().domain([t.lyAxisMin,t.lyAxisMax]);r&&a.y().rangeRound([a.yAxisHeight(),0]);a.y().range([a.yAxisHeight(),0]),a.yAxis(a.yAxis().scale(a.y()))}(i),n&&function(t){var n=void 0===a.rightY()||a.elasticY(),r=n||a.resizing();void 0===a.rightY()&&a.rightY(e.scaleLinear());n&&a.rightY().domain([t.ryAxisMin,t.ryAxisMax]);r&&a.rightY().rangeRound([a.yAxisHeight(),0]);a.rightY().range([a.yAxisHeight(),0]),a.rightYAxis(a.rightYAxis().scale(a.rightY()))}(i),m().length>0&&!p?a._renderHorizontalGridLinesForAxis(a.g(),a.y(),a.yAxis()):v().length>0&&a._renderHorizontalGridLinesForAxis(a.g(),r,f)},a.renderYAxis=function(){0!==m().length&&(a.renderYAxisAt("y",a.yAxis(),a.margins().left),a.renderYAxisLabel("y",a.yAxisLabel(),-90)),0!==v().length&&(a.renderYAxisAt("yr",a.rightYAxis(),a.width()-a.margins().right),a.renderYAxisLabel("yr",a.rightYAxisLabel(),90,a.width()-g))},a.plotData=function(){for(var t=0;t<l.length;++t){var e=l[t];e.g()||y(e,t),u&&e.colors(a.colors()),e.x(a.x()),e.xAxis(a.xAxis()),e.useRightYAxis()?(e.y(a.rightY()),e.yAxis(a.rightYAxis())):(e.y(a.y()),e.yAxis(a.yAxis())),e.plotData(),e._activateRenderlets()}},a.useRightAxisGridLines=function(t){return arguments?(p=t,a):p},a.childOptions=function(t){return arguments.length?(c=t,l.forEach(function(t){t.options(c)}),a):c},a.fadeDeselectedArea=function(t){if(a.brushOn())for(var e=0;e<l.length;++e){l[e].fadeDeselectedArea(t)}},a.rightYAxisLabel=function(t,e){return arguments.length?(h=t,a.margins().right-=g,g=void 0===e?12:e,a.margins().right+=g,a):h},a.compose=function(t){return(l=t).forEach(function(t){t.height(a.height()),t.width(a.width()),t.margins(a.margins()),s&&t.title(a.title()),t.options(c)}),a},a.children=function(){return l},a.shareColors=function(t){return arguments.length?(u=t,a):u},a.shareTitle=function(t){return arguments.length?(s=t,a):s},a.rightY=function(t){return arguments.length?(r=t,a.rescale(),a):r},a.alignYAxes=function(t){return arguments.length?(d=t,a.rescale(),a):d},delete a.yAxisMin,delete a.yAxisMax,x(a,"xAxisMin",function(){return o.subtract(e.min(l.map(function(t){return t.xAxisMin()})),a.xAxisPadding(),a.xAxisPaddingUnit())}),x(a,"xAxisMax",function(){return o.add(e.max(l.map(function(t){return t.xAxisMax()})),a.xAxisPadding(),a.xAxisPaddingUnit())}),a.legendables=function(){return l.reduce(function(t,e){return u&&e.colors(a.colors()),t.push.apply(t,e.legendables()),t},[])},a.legendHighlight=function(t){for(var e=0;e<l.length;++e){l[e].legendHighlight(t)}},a.legendReset=function(t){for(var e=0;e<l.length;++e){l[e].legendReset(t)}},a.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},a.rightYAxis=function(t){return arguments.length?(f=t,a):f},a.anchor(t,n)},U=function(t,n){var r,i,l="dc-tooltip",c="dot",u="yRef",s="xRef",d=3,f=G(N({})),h=!1,g=5,y=null,m=1e-6,v=1e-6,A=null,b=null,D=null,k=!0;function w(t,e){return f.getColor.call(t,t.values,e)}function C(){var t=null;if(A)return A;"function"==typeof b?t=b:t={linear:e.curveLinear,"linear-closed":e.curveLinearClosed,step:e.curveStep,"step-before":e.curveStepBefore,"step-after":e.curveStepAfter,basis:e.curveBasis,"basis-open":e.curveBasisOpen,"basis-closed":e.curveBasisClosed,bundle:e.curveBundle,cardinal:e.curveCardinal,"cardinal-open":e.curveCardinalOpen,"cardinal-closed":e.curveCardinalClosed,monotone:e.curveMonotoneX}[b];return t||(t=e.curveLinear),null!==D&&("function"!=typeof t.tension?_.warn("tension was specified but the curve/interpolate does not support it."):t=t.tension(D)),t}function L(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}function S(){return y||g}function E(t,e){f.renderTitle()&&(t.select("title").remove(),t.append("title").text(a("data",f.title(e.name))))}function R(t,n,r){return function(){var i=e.select(this),a=i.attr("stroke")===t&&i.attr("stroke-dasharray")===(n instanceof Array?n.join(","):null)||i.attr("fill")===t;return r?!a:a}}return f.transitionDuration(500),f.transitionDelay(0),f._rangeBandPadding(1),f.plotData=function(){var t=f.chartBodyG(),n=t.select("g.stack-list");n.empty()&&(n=t.append("g").attr("class","stack-list"));var y=n.selectAll("g.stack").data(f.data()),x=y.enter().append("g").attr("class",function(t,e){return"stack _"+e});(function(t,n){var a=e.line().x(function(t){return f.x()(t.x)}).y(function(t){return f.y()(t.y+t.y0)}).curve(C());r&&a.defined(r);var o=t.append("path").attr("class","line").attr("stroke",w);i&&o.attr("stroke-dasharray",i);p(n.select("path.line"),f.transitionDuration(),f.transitionDelay()).attr("stroke",w).attr("d",function(t){return L(a(t.values))})})(x,y=x.merge(y)),function(t,n){if(h){var i=e.area().x(function(t){return f.x()(t.x)}).y1(function(t){return f.y()(t.y+t.y0)}).y0(function(t){return f.y()(t.y0)}).curve(C());r&&i.defined(r),t.append("path").attr("class","area").attr("fill",w).attr("d",function(t){return L(i(t.values))}),p(n.select("path.area"),f.transitionDuration(),f.transitionDelay()).attr("fill",w).attr("d",function(t){return L(i(t.values))})}}(x,y),function(t,n){if("always"===f.xyTipsOn()||!f.brushOn()&&!f.parentBrushOn()&&f.xyTipsOn()){var i=l+"-list",d=t.select("g."+i);d.empty()&&(d=t.append("g").attr("class",i)),n.each(function(t,n){var i=t.values;r&&(i=i.filter(r));var h=d.select("g."+l+"._"+n);h.empty()&&(h=d.append("g").attr("class",l+" _"+n)),function(t){(t.select("path."+u).empty()?t.append("path").attr("class",u):t.select("path."+u)).style("display","none").attr("stroke-dasharray","5,5"),(t.select("path."+s).empty()?t.append("path").attr("class",s):t.select("path."+s)).style("display","none").attr("stroke-dasharray","5,5")}(h);var y=h.selectAll("circle."+c).data(i,a("x")),x=y.enter().append("circle").attr("class",c).attr("cx",function(t){return o.safeNumber(f.x()(t.x))}).attr("cy",function(t){return o.safeNumber(f.y()(t.y+t.y0))}).attr("r",S()).style("fill-opacity",m).style("stroke-opacity",v).attr("fill",f.getColor).attr("stroke",f.getColor).on("mousemove",function(){var t=e.select(this);!function(t){t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",g)}(t),function(t,e){var n=t.attr("cx"),r=t.attr("cy"),i="M"+(f._yAxisX()-f.margins().left)+" "+r+"L"+n+" "+r,a="M"+n+" "+f.yAxisHeight()+"L"+n+" "+r;e.select("path."+u).style("display","").attr("d",i),e.select("path."+s).style("display","").attr("d",a)}(t,h)}).on("mouseout",function(){var t=e.select(this);!function(t){t.style("fill-opacity",m).style("stroke-opacity",v).attr("r",S())}(t),function(t){t.select("path."+u).style("display","none"),t.select("path."+s).style("display","none")}(h)}).merge(y);x.call(E,t),p(x,f.transitionDuration()).attr("cx",function(t){return o.safeNumber(f.x()(t.x))}).attr("cy",function(t){return o.safeNumber(f.y()(t.y+t.y0))}).attr("fill",f.getColor),y.exit().remove()})}}(t,y),f.renderLabel()&&function(t){t.each(function(t,n){var r=e.select(this),i=r.selectAll("text.lineLabel").data(t.values,a("x")),l=i.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(i);p(l,f.transitionDuration()).attr("x",function(t){return o.safeNumber(f.x()(t.x))}).attr("y",function(t){var e=f.y()(t.y+t.y0)-d;return o.safeNumber(e)}).text(function(t){return f.label()(t)}),p(i.exit(),f.transitionDuration()).attr("height",0).remove()})}(y)},f.curve=function(t){return arguments.length?(A=t,f):A},f.interpolate=_.deprecate(function(t){return arguments.length?(b=t,f):b},"dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),f.tension=_.deprecate(function(t){return arguments.length?(D=t,f):D},"dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),f.defined=function(t){return arguments.length?(r=t,f):r},f.dashStyle=function(t){return arguments.length?(i=t,f):i},f.renderArea=function(t){return arguments.length?(h=t,f):h},f.label(function(t){return o.printSingleValue(t.y0+t.y)},!1),f.xyTipsOn=function(t){return arguments.length?(k=t,f):k},f.dotRadius=function(t){return arguments.length?(g=t,f):g},f.renderDataPoints=function(t){return arguments.length?(t?(m=t.fillOpacity||.8,v=t.strokeOpacity||0,y=t.radius||2):(m=1e-6,v=1e-6,y=null),f):{fillOpacity:m,strokeOpacity:v,radius:y}},f.legendHighlight=function(t){f.isLegendableHidden(t)||f.g().selectAll("path.line, path.area").classed("highlight",R(t.color,t.dashstyle)).classed("fadeout",R(t.color,t.dashstyle,!0))},f.legendReset=function(){f.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},x(f,"legendables",function(){var t=f._legendables();return i?t.map(function(t){return t.dashstyle=i,t}):t}),f.anchor(t,n)};t.abstractBubbleChart=M,t.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).on("end",function(){--n||e.call(t)})}},t.barChart=function(t,r){var i,l=1,c=3,u=G(N({})),s=2,d=!1,f=!1;function h(t){return o.safeNumber(Math.abs(u.y()(t.y+t.y0)-u.y()(t.y0)))}function g(t){var e=u.x()(t.x);return d||(e+=i/2),u.isOrdinal()&&void 0!==s&&(e+=s/2),o.safeNumber(e)}function y(t){var e=u.y()(t.y+t.y0);return t.y<0&&(e-=h(t)),o.safeNumber(e-c)}function m(t){var e=u.x()(t.x);return d&&(e-=i/2),u.isOrdinal()&&void 0!==s&&(e+=s/2),o.safeNumber(e)}function v(t,n){return function(){var r=e.select(this).attr("fill")===t;return n?!r:r}}return x(u,"rescale",function(){return u._rescale(),i=void 0,u}),x(u,"render",function(){return u.round()&&d&&!f&&_.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),u._render()}),u.label(function(t){return o.printSingleValue(t.y0+t.y)},!1),u.plotData=function(){var t=u.chartBodyG().selectAll("g.stack").data(u.data());!function(){if(void 0===i){var t=u.xUnitCount();((i=u.isOrdinal()&&void 0===s?Math.floor(u.x().bandwidth()):s?Math.floor((u.xAxisLength()-(t-1)*s)/t):Math.floor(u.xAxisLength()/(1+u.barPadding())/t))===1/0||isNaN(i)||i<l)&&(i=l)}}();var n=(t=t.enter().append("g").attr("class",function(t,e){return"stack _"+e}).merge(t)).size()-1;t.each(function(t,r){var l=e.select(this);!function(t,e,n){var r=t.selectAll("rect.bar").data(n.values,a("x")),l=r.enter().append("rect").attr("class","bar").attr("fill",a("data",u.getColor)).attr("x",m).attr("y",u.yAxisHeight()).attr("height",0),c=l.merge(r);u.renderTitle()&&l.append("title").text(a("data",u.title(n.name))),u.isOrdinal()&&c.on("click",u.onClick),p(c,u.transitionDuration(),u.transitionDelay()).attr("x",m).attr("y",function(t){var e=u.y()(t.y+t.y0);return t.y<0&&(e-=h(t)),o.safeNumber(e)}).attr("width",i).attr("height",function(t){return h(t)}).attr("fill",a("data",u.getColor)).select("title").text(a("data",u.title(n.name))),p(r.exit(),u.transitionDuration(),u.transitionDelay()).attr("x",function(t){return u.x()(t.x)}).attr("width",.9*i).remove()}(l,0,t),u.renderLabel()&&n===r&&function(t,e,n){var r=t.selectAll("text.barLabel").data(n.values,a("x")),i=r.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",g).attr("y",y).merge(r);u.isOrdinal()&&(i.on("click",u.onClick),i.attr("cursor","pointer")),p(i,u.transitionDuration(),u.transitionDelay()).attr("x",g).attr("y",y).text(function(t){return u.label()(t)}),p(r.exit(),u.transitionDuration(),u.transitionDelay()).attr("height",0).remove()}(l,0,t)})},u.fadeDeselectedArea=function(t){var e=u.chartBodyG().selectAll("rect.bar");if(u.isOrdinal())u.hasFilter()?(e.classed(n.SELECTED_CLASS,function(t){return u.hasFilter(t.x)}),e.classed(n.DESELECTED_CLASS,function(t){return!u.hasFilter(t.x)})):(e.classed(n.SELECTED_CLASS,!1),e.classed(n.DESELECTED_CLASS,!1));else if(u.brushOn()||u.parentBrushOn())if(u.brushIsEmpty(t))e.classed(n.DESELECTED_CLASS,!1);else{var r=t[0],i=t[1];e.classed(n.DESELECTED_CLASS,function(t){return t.x<r||t.x>=i})}},u.centerBar=function(t){return arguments.length?(d=t,u):d},x(u,"onClick",function(t){u._onClick(t.data)}),u.barPadding=function(t){return arguments.length?(u._rangeBandPadding(t),s=void 0,u):u._rangeBandPadding()},u._useOuterPadding=function(){return void 0===s},u.outerPadding=u._outerRangeBandPadding,u.gap=function(t){return arguments.length?(s=t,u):s},u.extendBrush=function(t){return t&&u.round()&&(!d||f)&&(t[0]=u.round()(t[0]),t[1]=u.round()(t[1])),t},u.alwaysUseRounding=function(t){return arguments.length?(f=t,u):f},u.legendHighlight=function(t){u.isLegendableHidden(t)||u.g().selectAll("rect.bar").classed("highlight",v(t.color)).classed("fadeout",v(t.color,!0))},u.legendReset=function(){u.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},x(u,"xAxisMax",function(){var t=this._xAxisMax();return"resolution"in u.xUnits()&&(t+=u.xUnits().resolution),t}),u.anchor(t,r)},t.baseChart=B,t.baseMixin=B,t.boxPlot=function(t,n){var r=N({});var i=(y=1.5,function(t){var e=t.quartiles[0],n=t.quartiles[2],r=(n-e)*y,i=-1,a=t.length;do{++i}while(t[i]<e-r);do{--a}while(t[a]>n+r);return[i,a]}),a=E(),l=null,c=!1,u=.3,s=.8,d=!0,f=!1,h=8,g=function(t,e){return r.isOrdinal()?r.x().bandwidth():t/(1+r.boxPadding())/e};var y;r.x(e.scaleBand()),r.xUnits(m.ordinal),r.data(function(t){return t.all().map(function(t){return t.map=function(e){return e.call(t,t)},t}).filter(function(t){return 0!==r.valueAccessor()(t).length})}),r.boxPadding=r._rangeBandPadding,r.boxPadding(.8),r.outerPadding=r._outerRangeBandPadding,r.outerPadding(.5),r.boxWidth=function(t){return arguments.length?(g="function"==typeof t?t:o.constant(t),r):g};var v=function(t,e){return"translate("+r.x()(r.keyAccessor()(t,e))+", 0)"};function x(){return e.min(r.data(),function(t){return e.min(r.valueAccessor()(t))})}function A(){return e.max(r.data(),function(t){return e.max(r.valueAccessor()(t))})}function b(){return(A()-x())/r.effectiveHeight()}return r._preprocessData=function(){r.elasticX()&&r.x().domain([])},r.plotData=function(){var t=g(r.effectiveWidth(),r.xUnitCount());a.whiskers(i).width(t).height(r.effectiveHeight()).value(r.valueAccessor()).domain(r.y().domain()).duration(r.transitionDuration()).tickFormat(l).renderDataPoints(c).dataOpacity(u).dataWidthPortion(s).renderTitle(r.renderTitle()).showOutliers(d).boldOutlier(f);var n=r.chartBodyG().selectAll("g.box").data(r.data(),r.keyAccessor());!function(t){p(t,r.transitionDuration(),r.transitionDelay()).attr("transform",v).call(a).each(function(t){var n=r.getColor(t,0);e.select(this).select("rect.box").attr("fill",n),e.select(this).selectAll("circle.data").attr("fill",n)})}(function(t){var e=t.enter().append("g");return e.attr("class","box").attr("transform",v).call(a).on("click",function(t){r.filter(r.keyAccessor()(t)),r.redrawGroup()}),e.merge(t)}(n)),function(t){t.exit().remove().call(a)}(n),r.fadeDeselectedArea(r.filter())},r.fadeDeselectedArea=function(t){if(r.hasFilter())if(r.isOrdinal())r.g().selectAll("g.box").each(function(t){r.isSelectedNode(t)?r.highlightSelected(this):r.fadeDeselected(this)});else{if(!r.brushOn()&&!r.parentBrushOn())return;var e=t[0],n=t[1],i=r.keyAccessor();r.g().selectAll("g.box").each(function(t){var a=i(t);a<e||a>=n?r.fadeDeselected(this):r.highlightSelected(this)})}else r.g().selectAll("g.box").each(function(){r.resetHighlight(this)})},r.isSelectedNode=function(t){return r.hasFilter(r.keyAccessor()(t))},r.yAxisMin=function(){var t=h*b();return o.subtract(x()-t,r.yAxisPadding())},r.yAxisMax=function(){var t=h*b();return o.add(A()+t,r.yAxisPadding())},r.tickFormat=function(t){return arguments.length?(l=t,r):l},r.yRangePadding=function(t){return arguments.length?(h=t,r):h},r.renderDataPoints=function(t){return arguments.length?(c=t,r):c},r.dataOpacity=function(t){return arguments.length?(u=t,r):u},r.dataWidthPortion=function(t){return arguments.length?(s=t,r):s},r.showOutliers=function(t){return arguments.length?(d=t,r):d},r.boldOutlier=function(t){return arguments.length?(f=t,r):f},r.anchor(t,n)},t.bubbleChart=function(t,e){var n=M(N({}));n.transitionDuration(750),n.transitionDelay(0);var r=function(t){return"translate("+function(t){var e=n.x()(n.keyAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}(t)+","+function(t){var e=n.y()(n.valueAccessor()(t));return!isNaN(e)&&isFinite(e)||(e=0),e}(t)+")"};return n.plotData=function(){n.calculateRadiusDomain(),n.r().range([n.MIN_RADIUS,n.xAxisLength()*n.maxBubbleRelativeSize()]);var t=n.data(),e=n.chartBodyG().selectAll("g."+n.BUBBLE_NODE_CLASS).data(t,function(t){return t.key});n.sortBubbleSize()&&e.order(),function(t){t.exit().remove()}(e),function(t){p(t,n.transitionDuration(),n.transitionDelay()).attr("transform",r).select("circle."+n.BUBBLE_CLASS).attr("fill",n.getColor).attr("r",function(t){return n.bubbleR(t)}).attr("opacity",function(t){return n.bubbleR(t)>0?1:0}),n.doUpdateLabels(t),n.doUpdateTitles(t)}(e=function(t){var e=t.enter().append("g");return e.attr("class",n.BUBBLE_NODE_CLASS).attr("transform",r).append("circle").attr("class",function(t,e){return n.BUBBLE_CLASS+" _"+e}).on("click",n.onClick).attr("fill",n.getColor).attr("r",0),t=e.merge(t),p(t,n.transitionDuration(),n.transitionDelay()).select("circle."+n.BUBBLE_CLASS).attr("r",function(t){return n.bubbleR(t)}).attr("opacity",function(t){return n.bubbleR(t)>0?1:0}),n._doRenderLabel(e),n._doRenderTitles(e),t}(e)),n.fadeDeselectedArea(n.filter())},n.renderBrush=function(){},n.redrawBrush=function(t,e){n.fadeDeselectedArea(t)},n.anchor(t,e)},t.bubbleMixin=M,t.bubbleOverlay=function(t,r){var i,a="bubble-overlay",l="node",c="bubble",u=M(B({})),s=[];function d(){var t={};return u.data().forEach(function(e){t[u.keyAccessor()(e)]=e}),t}function f(t,e){var n=l+" "+o.nameToId(t.name),r=i.select("g."+o.nameToId(t.name));return r.empty()&&(r=i.append("g").attr("class",n).attr("transform","translate("+t.x+","+t.y+")")),r.datum(e[t.name]),r}return u.transitionDuration(750),u.transitionDelay(0),u.radiusValueAccessor(function(t){return t.value}),u.point=function(t,e,n){return s.push({name:t,x:e,y:n}),u},u._doRender=function(){var t;return(i=u.select("g."+a)).empty()&&(i=u.svg().append("g").attr("class",a)),i=i,u.r().range([u.MIN_RADIUS,u.width()*u.maxBubbleRelativeSize()]),t=d(),u.calculateRadiusDomain(),s.forEach(function(e){var n=f(e,t),r=n.select("circle."+c);r.empty()&&(r=n.append("circle").attr("class",c).attr("r",0).attr("fill",u.getColor).on("click",u.onClick)),p(r,u.transitionDuration(),u.transitionDelay()).attr("r",function(t){return u.bubbleR(t)}),u._doRenderLabel(n),u._doRenderTitles(n)}),u.fadeDeselectedArea(u.filter()),u},u._doRedraw=function(){var t;return t=d(),u.calculateRadiusDomain(),s.forEach(function(e){var n=f(e,t),r=n.select("circle."+c);p(r,u.transitionDuration(),u.transitionDelay()).attr("r",function(t){return u.bubbleR(t)}).attr("fill",u.getColor),u.doUpdateLabels(n),u.doUpdateTitles(n)}),u.fadeDeselectedArea(u.filter()),u},u.debug=function(t){if(t){var r=u.select("g."+n.DEBUG_GROUP_CLASS);r.empty()&&(r=u.svg().append("g").attr("class",n.DEBUG_GROUP_CLASS));var i=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",u.width()).attr("height",u.height()).on("mousemove",function(){var t=e.mouse(r.node()),n=t[0]+", "+t[1];i.text(n)})}else u.selectAll(".debug").remove();return u},u.anchor(t,r),u},t.capMixin=H,t.capped=H,t.cboxMenu=function(t,n){var r,i="dc-cbox-item",a=B({}),o="Select all",l=!1,c="radio",u=null,s=Math.floor(1e5*Math.random())+1,d=function(t,e){return a.keyAccessor()(t)>a.keyAccessor()(e)?1:a.keyAccessor()(e)>a.keyAccessor()(t)?-1:0},f=function(t){return a.valueAccessor()(t)>0};function h(t,n){var r;e.select(e.event.target).datum()?(r=e.select(this).selectAll("input").filter(function(t){if(t)return this.checked}).nodes().map(function(t){return t.value}),l||1!==r.length||(r=r[0])):r=u||null,a.onChange(r)}return a.data(function(t){return t.all().filter(f)}),a._doRender=function(){return a._doRedraw()},a._doRedraw=function(){return a.select("ul").remove(),r=a.root().append("ul").classed("dc-cbox-group",!0),function(){var t=r.selectAll("li."+i).data(a.data(),function(t){return a.keyAccessor()(t)});if(t.exit().remove(),(t=t.enter().append("li").classed(i,!0).merge(t)).append("input").attr("type",c).attr("value",function(t){return a.keyAccessor()(t)}).attr("name","domain_"+s).attr("id",function(t,e){return"input_"+s+"_"+e}),t.append("label").attr("for",function(t,e){return"input_"+s+"_"+e}).text(a.title()),l)r.append("li").append("input").attr("type","reset").text(o).on("click",h);else{var e=r.append("li");e.append("input").attr("type",c).attr("value",u).attr("name","domain_"+s).attr("id",function(t,e){return"input_"+s+"_all"}).property("checked",!0),e.append("label").attr("for",function(t,e){return"input_"+s+"_all"}).text(o)}r.selectAll("li."+i).sort(d),r.on("change",h)}(),a.hasFilter()&&l?r.selectAll("input").property("checked",function(t){return t&&a.filters().indexOf(String(a.keyAccessor()(t)))>=0||!1}):a.hasFilter()&&r.selectAll("input").property("checked",function(t){return!!t&&a.keyAccessor()(t)===a.filter()}),a},a.onChange=function(t){t&&l?a.replaceFilter([t]):t?a.replaceFilter(t):a.filterAll(),L.trigger(function(){a.redrawGroup()})},a.order=function(t){return arguments.length?(d=t,a):d},a.promptText=function(t){return arguments.length?(o=t,a):o},a.filterDisplayed=function(t){return arguments.length?(f=t,a):f},a.multiple=function(t){return arguments.length?(c=(l=t)?"checkbox":"radio",a):l},a.promptValue=function(t){return arguments.length?(u=t,a):u},a.anchor(t,n)},t.chartRegistry=s,t.colorChart=T,t.colorMixin=T,t.compositeChart=P,t.config=D,t.constants=n,t.coordinateGridChart=N,t.coordinateGridMixin=N,t.d3Box=E,t.dataCount=function(t,n){var r=e.format(",d"),i=B({}),a=null,o=null,l={some:"",all:""};return i._mandatoryAttributes(["crossfilter","groupAll"]),i.html=function(t){return arguments.length?(t.all&&(l.all=t.all),t.some&&(l.some=t.some),i):l},i.formatNumber=function(t){return arguments.length?(r=t,i):r},i._doRender=function(){var t=i.crossfilter().size(),e=i.groupAll().value(),n=r(t),a=r(e);return t===e&&""!==l.all?i.root().html(l.all.replace("%total-count",n).replace("%filter-count",a)):""!==l.some?i.root().html(l.some.replace("%total-count",n).replace("%filter-count",a)):(i.selectAll(".total-count").text(n),i.selectAll(".filter-count").text(a)),i},i._doRedraw=function(){return i._doRender()},i.crossfilter=function(t){return arguments.length?(a=t,this):a},i.dimension=_.annotate(i.crossfilter,"consider using dataCount.crossfilter instead of dataCount.dimension for clarity"),i.groupAll=function(t){return arguments.length?(o=t,this):o},i.group=_.annotate(i.groupAll,"consider using dataCount.groupAll instead of dataCount.group for clarity"),i.anchor(t,n)},t.dataGrid=function(t,n){var r,i="dc-grid-item",a="dc-grid-top",o=B({}),l=null,c=999,u=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},s=function(t){return t},d=e.ascending,f=0,h=function(t){return"<div class='dc-grid-section dc-grid-group'><h1 class='dc-grid-label'>"+o.keyAccessor()(t)+"</h1></div>"};return o._mandatoryAttributes(["dimension","section"]),o._doRender=function(){var t,n;return o.selectAll("div."+a).remove(),t=function(){var t,n=o.root().selectAll("div."+a).data((t=o.dimension().top(c),e.nest().key(o.section()).sortKeys(d).entries(t.sort(function(t,e){return d(s(t),s(e))}).slice(f,r))),function(t){return o.keyAccessor()(t)}),i=n.enter().append("div").attr("class",a);return h&&i.html(function(t){return h(t)}),n.exit().remove(),i}(),(n=t.order().selectAll("div."+i).data(function(t){return t.values})).exit().remove(),n=n.enter().append("div").attr("class",i).html(function(t){return u(t)}).merge(n),o},o._doRedraw=function(){return o._doRender()},o.section=function(t){return arguments.length?(l=t,o):l},o.group=_.annotate(o.section,"consider using dataGrid.section instead of dataGrid.group for clarity"),o.beginSlice=function(t){return arguments.length?(f=t,o):f},o.endSlice=function(t){return arguments.length?(r=t,o):r},o.size=function(t){return arguments.length?(c=t,o):c},o.html=function(t){return arguments.length?(u=t,o):u},o.htmlSection=function(t){return arguments.length?(h=t,o):h},o.htmlGroup=_.annotate(o.htmlSection,"consider using dataGrid.htmlSection instead of dataGrid.htmlGroup for clarity"),o.sortBy=function(t){return arguments.length?(s=t,o):s},o.order=function(t){return arguments.length?(d=t,o):d},o.anchor(t,n)},t.dataTable=function(t,n){var r,i="dc-table-label",a="dc-table-row",o="dc-table-column",l="dc-table-section dc-table-group",c="dc-table-head",u=B({}),s=25,d=[],f=function(t){return t},h=e.ascending,g=0,p=!0,y=function(){return""};return u._mandatoryAttributes(["dimension"]),u._doRender=function(){var t,n,y;return u.selectAll("tbody").remove(),t=function(){var t=!0;if(d.forEach(function(e){t&="function"==typeof e}),!t){var n=u.selectAll("thead").data([0]);n.exit().remove();var a=(n=n.enter().append("thead").merge(n)).selectAll("tr").data([0]);a.exit().remove();var o=(a=a.enter().append("tr").merge(a)).selectAll("th").data(d);o.exit().remove(),o.enter().append("th").merge(o).attr("class",c).html(function(t){return u._doColumnHeaderFormat(t)})}var y,m=u.root().selectAll("tbody").data((y=h===e.ascending?u.dimension().bottom(s):u.dimension().top(s),e.nest().key(u.section()).sortKeys(h).entries(y.sort(function(t,e){return h(f(t),f(e))}).slice(g,r))),function(t){return u.keyAccessor()(t)}),v=m.enter().append("tbody");return!0===p&&v.append("tr").attr("class",l).append("td").attr("class",i).attr("colspan",d.length).html(function(t){return u.keyAccessor()(t)}),m.exit().remove(),v}(),n=t.order().selectAll("tr."+a).data(function(t){return t.values}),y=n.enter().append("tr").attr("class",a),d.forEach(function(t,e){y.append("td").attr("class",o+" _"+e).html(function(e){return u._doColumnValueFormat(t,e)})}),n.exit().remove(),u},u._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},u._doColumnHeaderFormat=function(t){return"function"==typeof t?u._doColumnHeaderFnToString(t):"string"==typeof t?u._doColumnHeaderCapitalize(t):String(t.label)},u._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},u._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(n>=0){var r=e.lastIndexOf(";");r>=0&&(e=e.substring(n+7,r)).indexOf("numberFormat")>=0&&(e=e.replace("numberFormat",""))}return e},u._doRedraw=function(){return u._doRender()},u.section=function(t){return arguments.length?(y=t,u):y},u.group=_.annotate(u.section,"consider using dataTable.section instead of dataTable.group for clarity"),u.size=function(t){return arguments.length?(s=t,u):s},u.beginSlice=function(t){return arguments.length?(g=t,u):g},u.endSlice=function(t){return arguments.length?(r=t,u):r},u.columns=function(t){return arguments.length?(d=t,u):d},u.sortBy=function(t){return arguments.length?(f=t,u):f},u.order=function(t){return arguments.length?(h=t,u):h},u.showSections=function(t){return arguments.length?(p=t,u):p},u.showGroups=_.annotate(u.showSections,"consider using dataTable.showSections instead of dataTable.showGroups for clarity"),u.anchor(t,n)},t.dateFormat=r,t.deregisterAllCharts=function(t){s.clear(t)},t.deregisterChart=f,t.disableTransitions=!1,t.errors=b,t.events=L,t.filterAll=function(t){for(var e=s.list(t),n=0;n<e.length;++n)e[n].filterAll()},t.filters=S,t.geoChoroplethChart=function(t,n){var r=T(B({}));r.colorAccessor(function(t){return t||0});var i,a,l=e.geoPath(),c=[];function u(t){var n=function(){for(var t={},e=r.data(),n=0;n<e.length;++n)t[r.keyAccessor()(e[n])]=r.valueAccessor()(e[n]);return t}();if(function(t){return h(t).keyAccessor}(t)){var i=function(t){return r.svg().selectAll(function(t){return"g.layer"+t+" g."+h(t).name}(t)).classed("selected",function(e){return s(t,e)}).classed("deselected",function(e){return d(t,e)}).attr("class",function(e){var n=h(t).name,r=o.nameToId(h(t).keyAccessor(e)),i=n+" "+r;return s(t,e)&&(i+=" selected"),d(t,e)&&(i+=" deselected"),i})}(t);!function(t,n,i){var a=t.select("path").attr("fill",function(){var t=e.select(this).attr("fill");return t||"none"}).on("click",function(t){return r.onClick(t,n)});p(a,r.transitionDuration(),r.transitionDelay()).attr("fill",function(t,e){return r.getColor(i[h(n).keyAccessor(t)],e)})}(i,t,n),function(t,e,n){r.renderTitle()&&t.selectAll("title").text(function(t){var i=f(e,t),a=n[i];return r.title()({key:i,value:a})})}(i,t,n)}}function s(t,e){return r.hasFilter()&&r.hasFilter(f(t,e))}function d(t,e){return r.hasFilter()&&!r.hasFilter(f(t,e))}function f(t,e){return h(t).keyAccessor(e)}function h(t){return c[t]}r._doRender=function(){r.resetSvg();for(var t=0;t<c.length;++t){var e=r.svg().append("g").attr("class","layer"+t).selectAll("g."+h(t).name).data(h(t).data);(e=e.enter().append("g").attr("class",h(t).name).merge(e)).append("path").attr("fill","white").attr("d",g()),e.append("title"),u(t)}i=!1},r.onClick=function(t,e){var n=h(e).keyAccessor(t);L.trigger(function(){r.filter(n),r.redrawGroup()})},r._doRedraw=function(){for(var t=0;t<c.length;++t)u(t),i&&r.svg().selectAll("g."+h(t).name+" path").attr("d",g());i=!1},r.overlayGeoJson=function(t,e,n){for(var i=0;i<c.length;++i)if(c[i].name===e)return c[i].data=t,c[i].keyAccessor=n,r;return c.push({name:e,data:t,keyAccessor:n}),r},r.projection=function(t){return arguments.length?(a=t,i=!0,r):a};var g=function(){return void 0===a?(_.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),l.projection(e.geoAlbersUsa())):l.projection(a)};return r.geoJsons=function(){return c},r.geoPath=function(){return l},r.removeGeoJson=function(t){for(var e=[],n=0;n<c.length;++n){var i=c[n];i.name!==t&&e.push(i)}return c=e,r},r.anchor(t,n)},t.hasChart=function(t){return s.has(t)},t.heatMap=function(t,n){var r,i,a,o=e.ascending,l=e.ascending,c=e.scaleBand(),u=e.scaleBand(),s=6.75,d=6.75,f=T(F(B({})));f._mandatoryAttributes(["group"]),f.title(f.colorAccessor());var h=function(t){return t},g=function(t){return t};f.colsLabel=function(t){return arguments.length?(h=t,f):h},f.rowsLabel=function(t){return arguments.length?(g=t,f):g};var y=function(t){A(0,t)},m=function(t){A(1,t)},v=function(t){var e=t.key;L.trigger(function(){f.filter(S.TwoDimensionalFilter(e)),f.redrawGroup()})};function A(t,e){var n=f.selectAll(".box-group").filter(function(n){return n.key[t]===e}),r=n.filter(function(t){return!f.hasFilter(t.key)});L.trigger(function(){var t=(r.empty()?n:r).data().map(function(t){return S.TwoDimensionalFilter(t.key)});f.filter([t]),f.redrawGroup()})}var b=_.deprecate(function(t){return f._filter(S.TwoDimensionalFilter(t))},"heatmap.filter taking a coordinate is deprecated - please pass dc.filters.TwoDimensionalFilter instead");return x(f,"filter",function(t){return arguments.length?null===t||"TwoDimensionalFilter"===t.filterType||Array.isArray(t)&&Array.isArray(t[0])&&"TwoDimensionalFilter"===t[0][0].filterType?f._filter(t):b(t):f._filter()}),f.rows=function(t){return arguments.length?(a=t,f):a},f.rowOrdering=function(t){return arguments.length?(l=t,f):l},f.cols=function(t){return arguments.length?(i=t,f):i},f.colOrdering=function(t){return arguments.length?(o=t,f):o},f._doRender=function(){return f.resetSvg(),r=f.svg().append("g").attr("class","heatmap").attr("transform","translate("+f.margins().left+","+f.margins().top+")"),f._doRedraw()},f._doRedraw=function(){var t=f.data(),e=f.rows()||t.map(f.valueAccessor()),n=f.cols()||t.map(f.keyAccessor());l&&(e=e.sort(l)),o&&(n=n.sort(o)),e=u.domain(e),n=c.domain(n);var i=e.domain().length,a=n.domain().length,h=Math.floor(f.effectiveWidth()/a),g=Math.floor(f.effectiveHeight()/i);n.rangeRound([0,f.effectiveWidth()]),e.rangeRound([f.effectiveHeight(),0]);var y=r.selectAll("g.box-group").data(f.data(),function(t,e){return f.keyAccessor()(t,e)+"\0"+f.valueAccessor()(t,e)});y.exit().remove();var m=y.enter().append("g").attr("class","box-group");m.append("rect").attr("class","heat-box").attr("fill","white").attr("x",function(t,e){return n(f.keyAccessor()(t,e))}).attr("y",function(t,n){return e(f.valueAccessor()(t,n))}).on("click",f.boxOnClick()),y=m.merge(y),f.renderTitle()&&(m.append("title"),y.select("title").text(f.title())),p(y.select("rect"),f.transitionDuration(),f.transitionDelay()).attr("x",function(t,e){return n(f.keyAccessor()(t,e))}).attr("y",function(t,n){return e(f.valueAccessor()(t,n))}).attr("rx",s).attr("ry",d).attr("fill",f.getColor).attr("width",h).attr("height",g);var v=r.select("g.cols");v.empty()&&(v=r.append("g").attr("class","cols axis"));var x=v.selectAll("text").data(n.domain());x.exit().remove(),x=x.enter().append("text").attr("x",function(t){return n(t)+h/2}).style("text-anchor","middle").attr("y",f.effectiveHeight()).attr("dy",12).on("click",f.xAxisOnClick()).text(f.colsLabel()).merge(x),p(x,f.transitionDuration(),f.transitionDelay()).text(f.colsLabel()).attr("x",function(t){return n(t)+h/2}).attr("y",f.effectiveHeight());var A=r.select("g.rows");A.empty()&&(A=r.append("g").attr("class","rows axis"));var b=A.selectAll("text").data(e.domain());return b.exit().remove(),b=b.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",function(t){return e(t)+g/2}).attr("dy",6).on("click",f.yAxisOnClick()).text(f.rowsLabel()).merge(b),p(b,f.transitionDuration(),f.transitionDelay()).text(f.rowsLabel()).attr("y",function(t){return e(t)+g/2}),f.hasFilter()?f.selectAll("g.box-group").each(function(t){f.isSelectedNode(t)?f.highlightSelected(this):f.fadeDeselected(this)}):f.selectAll("g.box-group").each(function(){f.resetHighlight(this)}),f},f.boxOnClick=function(t){return arguments.length?(v=t,f):v},f.xAxisOnClick=function(t){return arguments.length?(y=t,f):y},f.yAxisOnClick=function(t){return arguments.length?(m=t,f):m},f.xBorderRadius=function(t){return arguments.length?(s=t,f):s},f.yBorderRadius=function(t){return arguments.length?(d=t,f):d},f.isSelectedNode=function(t){return f.hasFilter(t.key)},f.anchor(t,n)},t.htmlLegend=function(){var t,r,i,l,c={},u=a("name"),s=!1,d=!1;return c.parent=function(e){return arguments.length?(t=e,c):t},c.render=function(){var e=s?"dc-legend-item-horizontal":"dc-legend-item-vertical";r.select("div.dc-html-legend").remove();var o=r.append("div").attr("class","dc-html-legend");o.attr("style","max-width:"+r.nodes()[0].style.width);var c=t.legendables(),f=t.filters();void 0!==i&&(c=c.slice(0,i));var h=l||e,g=o.selectAll("div."+h).data(c).enter().append("div").classed(h,!0).on("mouseover",t.legendHighlight).on("mouseout",t.legendReset).on("click",t.legendToggle);d&&g.classed(n.SELECTED_CLASS,function(t){return-1!==f.indexOf(t.name)}),g.append("span").attr("class","dc-legend-item-color").style("background-color",a("color")),g.append("span").attr("class","dc-legend-item-label").attr("title",u).text(u)},c.container=function(t){return arguments.length?(r=e.select(t),c):r},c.legendItemClass=function(t){return arguments.length?(l=t,c):l},c.highlightSelected=function(t){return arguments.length?(d=t,c):d},c.horizontal=function(t){return arguments.length?(s=t,c):s},c.legendText=function(t){return arguments.length?(u=t,c):u},c.maxItems=function(t){return arguments.length?(i=o.isNumber(t)?t:void 0,c):i},c},t.instanceOfChart=A,t.legend=function(){var t,e,n,r={},i=0,l=0,c=12,u=5,s=!1,d=560,f=70,h=!1,g=a("name");function p(){return u+c}return r.parent=function(e){return arguments.length?(t=e,r):t},r.render=function(){t.svg().select("g.dc-legend").remove(),n=t.svg().append("g").attr("class","dc-legend").attr("transform","translate("+i+","+l+")");var r=t.legendables();void 0!==e&&(r=r.slice(0,e));var o=n.selectAll("g.dc-legend-item").data(r).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(e){t.legendHighlight(e)}).on("mouseout",function(e){t.legendReset(e)}).on("click",function(t){t.chart.legendToggle(t)});n.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),r.some(a("dashstyle"))?o.append("line").attr("x1",0).attr("y1",c/2).attr("x2",c).attr("y2",c/2).attr("stroke-width",2).attr("stroke-dasharray",a("dashstyle")).attr("stroke",a("color")):o.append("rect").attr("width",c).attr("height",c).attr("fill",function(t){return t?t.color:"blue"}),o.append("text").text(g).attr("x",c+2).attr("y",function(){return c/2+(this.clientHeight?this.clientHeight:13)/2-2});var y=0,m=0;o.attr("transform",function(t,e){if(s){var n=!0===h?this.getBBox().width+u:f;y+n>d&&y>0&&(++m,y=0);var r="translate("+y+","+m*p()+")";return y+=n,r}return"translate(0,"+e*p()+")"})},r.x=function(t){return arguments.length?(i=t,r):i},r.y=function(t){return arguments.length?(l=t,r):l},r.gap=function(t){return arguments.length?(u=t,r):u},r.itemHeight=function(t){return arguments.length?(c=t,r):c},r.horizontal=function(t){return arguments.length?(s=t,r):s},r.legendWidth=function(t){return arguments.length?(d=t,r):d},r.itemWidth=function(t){return arguments.length?(f=t,r):f},r.autoItemWidth=function(t){return arguments.length?(h=t,r):h},r.legendText=function(t){return arguments.length?(g=t,r):g},r.maxItems=function(t){return arguments.length?(e=o.isNumber(t)?t:void 0,r):e},r},t.lineChart=U,t.logger=_,t.marginMixin=F,t.marginable=F,t.numberDisplay=function(t,n){var r,i=e.format(".2s"),a=B({}),o={one:"",some:"",none:""};return a._mandatoryAttributes(["group"]),a.ordering(function(t){return t.value}),a.html=function(t){return arguments.length?(t.none?o.none=t.none:t.one?o.none=t.one:t.some&&(o.none=t.some),t.one?o.one=t.one:t.some&&(o.one=t.some),t.some?o.some=t.some:t.one&&(o.some=t.one),a):o},a.value=function(){return a.data()},a.data(function(t){var e=t.value?t.value():function(t){if(!t.length)return null;var e=a._computeOrderedGroups(t);return e[e.length-1]}(t.all());return a.valueAccessor()(e)}),a.transitionDuration(250),a.transitionDelay(0),a._doRender=function(){var t=a.value(),n=a.selectAll(".number-display");n.empty()&&(n=n.data([0]).enter().append("span").attr("class","number-display").merge(n)),n.transition().duration(a.transitionDuration()).delay(a.transitionDelay()).ease(e.easeQuad).tween("text",function(){var n=isFinite(r)?r:0,i=e.interpolateNumber(n||0,t);r=t;var l=this;return function(e){var n=null,r=a.formatNumber()(i(e));0===t&&""!==o.none?n=o.none:1===t&&""!==o.one?n=o.one:""!==o.some&&(n=o.some),l.innerHTML=n?n.replace("%number",r):r}})},a._doRedraw=function(){return a._doRender()},a.formatNumber=function(t){return arguments.length?(i=t,a):i},a.anchor(t,n)},t.optionalTransition=y,t.override=x,t.pieChart=function(t,n){var r,i,a,o,l,c,u="pie-slice",s="pie-label",d="pie-slice-group",f="pie-label-group",h="empty-chart",g="empty",y=0,m=0,v=.5,x=!1,A=H(T(B({})));function b(){var t=e.min([A.width(),A.height()])/2;r=i&&i<t?i:t;var n,o=w(),l=e.pie().sort(null).value(A.cappedValueAccessor);if(e.sum(A.data(),A.cappedValueAccessor)?(n=l(A.data()),a.classed(h,!1)):(n=l([{key:g,value:1,others:[g]}]),a.classed(h,!0)),a){var y=a.select("g."+d).selectAll("g."+u).data(n),m=a.select("g."+f).selectAll("text."+s).data(n);!function(t,e){t.exit().remove(),e.exit().remove()}(y,m),function(t,e,n,r){var i=function(t){return t.enter().append("g").attr("class",function(t,e){return u+" _"+e})}(t);(function(t,e){var n=t.append("path").attr("fill",S).on("click",E).attr("d",function(t,n){return R(t,n,e)}),r=p(n,A.transitionDuration(),A.transitionDelay());r.attrTween&&r.attrTween("d",L)})(i,n),function(t){A.renderTitle()&&t.append("title").text(function(t){return A.title()(t.data)})}(i),function(t,e,n){if(A.renderLabel()){var r=t.enter().append("text").attr("class",function(t,e){var n=u+" "+s+" _"+e;return c&&(n+=" external"),n}).on("click",E).on("mouseover",function(t,e){D(e,!0)}).on("mouseout",function(t,e){D(e,!1)});_(r,n),c&&x&&k(e,n)}}(e,r,n)}(y,m,o,n),function(t,e){(function(t,e){var n=a.selectAll("g."+u).data(t).select("path").attr("d",function(t,n){return R(t,n,e)}),r=p(n,A.transitionDuration(),A.transitionDelay());r.attrTween&&r.attrTween("d",L),r.attr("fill",S)})(t,e),function(t,e){if(A.renderLabel()){var n=a.selectAll("text."+s).data(t);_(n,e),c&&x&&k(t,e)}}(t,e),function(t){A.renderTitle()&&a.selectAll("g."+u).data(t).select("title").text(function(t){return A.title()(t.data)})}(t)}(n,o),A.hasFilter()?A.selectAll("g."+u).each(function(t){C(t)?A.highlightSelected(this):A.fadeDeselected(this)}):A.selectAll("g."+u).each(function(){A.resetHighlight(this)}),p(a,A.transitionDuration(),A.transitionDelay()).attr("transform","translate("+A.cx()+","+A.cy()+")")}}function _(t,n){A._applyLabelText(t),p(t,A.transitionDuration(),A.transitionDelay()).attr("transform",function(t){return function(t,n){var i;return i=c?e.arc().outerRadius(r-m+c).innerRadius(r-m+c).centroid(t):n.centroid(t),isNaN(i[0])||isNaN(i[1])?"translate(0,0)":"translate("+i+")"}(t,n)}).attr("text-anchor","middle")}function D(t,e){A.select("g.pie-slice._"+t).classed("highlight",e)}function k(t,n){var i=a.selectAll("polyline."+u).data(t);i.exit().remove(),i=i.enter().append("polyline").attr("class",function(t,e){return"pie-path _"+e+" "+u}).on("click",E).on("mouseover",function(t,e){D(e,!0)}).on("mouseout",function(t,e){D(e,!1)}).merge(i);var o=e.arc().outerRadius(r-m+c).innerRadius(r-m),l=p(i,A.transitionDuration(),A.transitionDelay());l.attrTween?l.attrTween("points",function(t){var r=this._current||t;r={startAngle:r.startAngle,endAngle:r.endAngle};var i=e.interpolate(r,t);return this._current=i(0),function(t){var e=i(t);return[n.centroid(e),o.centroid(e)]}}):l.attr("points",function(t){return[n.centroid(t),o.centroid(t)]}),l.style("visibility",function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"})}function w(){return e.arc().outerRadius(r-m).innerRadius(y)}function C(t){return A.hasFilter(A.cappedKeyAccessor(t.data))}function L(t){t.innerRadius=y;var n=this._current;n=function(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}(n)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};var r=e.interpolate(n,t);return this._current=r(0),function(t){return R(r(t),0,w())}}function S(t,e){return A.getColor(t.data,e)}function E(t,e){a.attr("class")!==h&&A.onClick(t.data,e)}function R(t,e,n){var r=n(t,e);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function O(t,n){A.selectAll("g.pie-slice").each(function(r){t.name===r.data.key&&e.select(this).classed("highlight",n)})}return A.colorAccessor(A.cappedKeyAccessor),A.title(function(t){return A.cappedKeyAccessor(t)+": "+A.cappedValueAccessor(t)}),A.slicesCap=A.cap,A.label(A.cappedKeyAccessor),A.renderLabel(!0),A.transitionDuration(350),A.transitionDelay(0),A._doRender=function(){return A.resetSvg(),(a=A.svg().append("g").attr("transform","translate("+A.cx()+","+A.cy()+")")).append("g").attr("class",d),a.append("g").attr("class",f),b(),A},A._applyLabelText=function(t){t.text(function(t){return!function(t){return 0===A.cappedValueAccessor(t)}(t.data)&&!function(t){var e=t.endAngle-t.startAngle;return isNaN(e)||e<v}(t)||C(t)?A.label()(t.data):""})},A.externalRadiusPadding=function(t){return arguments.length?(m=t,A):m},A.innerRadius=function(t){return arguments.length?(y=t,A):y},A.radius=function(t){return arguments.length?(i=t,A):i},A.cx=function(t){return arguments.length?(o=t,A):o||A.width()/2},A.cy=function(t){return arguments.length?(l=t,A):l||A.height()/2},A._doRedraw=function(){return b(),A},A.minAngleForLabel=function(t){return arguments.length?(v=t,A):v},A.emptyTitle=function(t){return 0===arguments.length?g:(g=t,A)},A.externalLabels=function(t){return 0===arguments.length?c:(c=t||void 0,A)},A.drawPaths=function(t){return 0===arguments.length?x:(x=t,A)},A.legendables=function(){return A.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:A};return n.color=A.getColor(t,e),n})},A.legendHighlight=function(t){O(t,!0)},A.legendReset=function(t){O(t,!1)},A.legendToggle=function(t){A.onClick({key:t.name,others:t.others})},A.anchor(t,n)},t.pluck=a,t.printers=i,t.redrawAll=g,t.refocusAll=function(t){for(var e=s.list(t),n=0;n<e.length;++n)e[n].focus&&e[n].focus()},t.registerChart=d,t.renderAll=h,t.renderlet=function(t){return arguments.length?(u=t,null):u},t.round=v,t.rowChart=function(t,n){var r,i,a,o,l=10,c=15,u=!1,s="0.35em",d=2,f=5,h=!1,g="row",y="titlerow",m=!1,v=H(F(T(B({})))),x=e.axisBottom();function A(){var t=r.select("g.axis");!function(){if(!i||a){var t=e.extent(o,v.cappedValueAccessor);t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0),i=e.scaleLinear().domain(t).range([0,v.effectiveWidth()])}x.scale(i)}(),t.empty()&&(t=r.append("g").attr("class","axis")),t.attr("transform","translate(0, "+v.effectiveHeight()+")"),p(t,v.transitionDuration(),v.transitionDelay()).call(x)}function b(){o=v.data(),A(),r.selectAll("g.tick").select("line.grid-line").remove(),r.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-v.effectiveHeight()});var t=r.selectAll("g."+g).data(o);!function(t){t.exit().remove()}(t),function(t){var e,n=o.length;e=h||(v.effectiveHeight()-(n+1)*f)/n,u||(c=e/2);var r=t.attr("transform",function(t,n){return"translate(0,"+((n+1)*f+n*e)+")"}).select("rect").attr("height",e).attr("fill",v.getColor).on("click",D).classed("deselected",function(t){return!!v.hasFilter()&&!w(t)}).classed("selected",function(t){return!!v.hasFilter()&&w(t)});p(r,v.transitionDuration(),v.transitionDelay()).attr("width",function(t){return Math.abs(_()-i(v.cappedValueAccessor(t)))}).attr("transform",k),function(t){v.renderTitle()&&(t.select("title").remove(),t.append("title").text(v.title()))}(t),function(t){if(v.renderLabel()){var e=t.select("text").attr("x",l).attr("y",c).attr("dy",s).on("click",D).attr("class",function(t,e){return g+" _"+e}).text(function(t){return v.label()(t)});p(e,v.transitionDuration(),v.transitionDelay()).attr("transform",k)}if(v.renderTitleLabel()){var n=t.select("."+y).attr("x",v.effectiveWidth()-d).attr("y",c).attr("dy",s).attr("text-anchor","end").on("click",D).attr("class",function(t,e){return y+" _"+e}).text(function(t){return v.title()(t)});p(n,v.transitionDuration(),v.transitionDelay()).attr("transform",k)}}(t)}(t=function(t){var e=t.enter().append("g").attr("class",function(t,e){return g+" _"+e});return e.append("rect").attr("width",0),function(t){v.renderLabel()&&t.append("text").on("click",D),v.renderTitleLabel()&&t.append("text").attr("class",y).on("click",D)}(e),e}(t).merge(t))}function _(){var t=i(0);return t===-1/0||t!=t?i(1):t}function D(t){v.onClick(t)}function k(t){var e=i(v.cappedValueAccessor(t)),n=_();return"translate("+(e>n?n:e)+",0)"}function w(t){return v.hasFilter(v.cappedKeyAccessor(t))}return v.rowsCap=v.cap,v._doRender=function(){return v.resetSvg(),r=v.svg().append("g").attr("transform","translate("+v.margins().left+","+v.margins().top+")"),b(),v},v.title(function(t){return v.cappedKeyAccessor(t)+": "+v.cappedValueAccessor(t)}),v.label(v.cappedKeyAccessor),v.x=function(t){return arguments.length?(i=t,v):i},v.renderTitleLabel=function(t){return arguments.length?(m=t,v):m},v._doRedraw=function(){return b(),v},v.xAxis=function(t){return arguments.length?(x=t,this):x},v.fixedBarHeight=function(t){return arguments.length?(h=t,v):h},v.gap=function(t){return arguments.length?(f=t,v):f},v.elasticX=function(t){return arguments.length?(a=t,v):a},v.labelOffsetX=function(t){return arguments.length?(l=t,v):l},v.labelOffsetY=function(t){return arguments.length?(c=t,u=!0,v):c},v.titleLabelOffsetX=function(t){return arguments.length?(d=t,v):d},v.anchor(t,n)},t.scatterPlot=function(t,r){var i=N({}),a=e.symbol(),o=function(t){return t.value},l=i.keyAccessor();i.keyAccessor(function(t){return l(t)[0]}),i.valueAccessor(function(t){return l(t)[1]}),i.colorAccessor(function(){return i._groupName}),i.title(function(t){return i.keyAccessor()(t)+","+i.valueAccessor()(t)+": "+i.existenceAccessor()(t)});var c=function(t){return"translate("+i.x()(i.keyAccessor()(t))+","+i.y()(i.valueAccessor()(t))+")"},u=7,s=5,d=3,f=null,h=1,g=0,m=0,v=1,A=null,b=[];function _(t,e){return o(t)?b[e]?Math.pow(s,2):Math.pow(d,2):Math.pow(g,2)}function D(t,e){i.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(function(t){return i.title()(t)}))}function k(t,n){var r=i.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return t(e.select(this))}),o=a.size();a.size(Math.pow(n,2)),p(r,i.transitionDuration(),i.transitionDelay()).attr("d",a),a.size(o)}return i.brush(e.brush()),a.size(_),x(i,"_filter",function(t){return arguments.length?i.__filter(S.RangedTwoDimensionalFilter(t)):i.__filter()}),i.plotData=function(){var t=i.chartBodyG().selectAll("path.symbol").data(i.data());p(t.exit(),i.transitionDuration(),i.transitionDelay()).attr("opacity",0).remove(),(t=t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",i.getColor).attr("transform",c).merge(t)).call(D,i.data()),t.each(function(t,e){b[e]=!i.filter()||i.filter().isFiltered([i.keyAccessor()(t),i.valueAccessor()(t)])}),p(t,i.transitionDuration(),i.transitionDelay()).attr("opacity",function(t,e){return o(t)?b[e]?v:i.excludedOpacity():m}).attr("fill",function(t,e){return A&&!o(t)?A:i.excludedColor()&&!b[e]?i.excludedColor():i.getColor(t)}).attr("transform",c).attr("d",a)},i.existenceAccessor=function(t){return arguments.length?(o=t,this):o},i.symbol=function(t){return arguments.length?(a.type(t),i):a.type()},i.customSymbol=function(t){return arguments.length?((a=t).size(_),i):a},i.symbolSize=function(t){return arguments.length?(s=t,i):s},i.highlightedSize=function(t){return arguments.length?(u=t,i):u},i.excludedSize=function(t){return arguments.length?(d=t,i):d},i.excludedColor=function(t){return arguments.length?(f=t,i):f},i.excludedOpacity=function(t){return arguments.length?(h=t,i):h},i.hiddenSize=i.emptySize=function(t){return arguments.length?(g=t,i):g},i.emptyColor=function(t){return arguments.length?(A=t,i):A},i.emptyOpacity=function(t){return arguments.length?(m=t,i):m},i.nonemptyOpacity=function(t){return arguments.length?(v=t,i):m},i.legendables=function(){return[{chart:i,name:i._groupName,color:i.getColor()}]},i.legendHighlight=function(t){k(function(e){return e.attr("fill")===t.color},u),i.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return e.select(this).attr("fill")!==t.color}).classed("fadeout",!0)},i.legendReset=function(t){k(function(e){return e.attr("fill")===t.color},s),i.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return e.select(this).attr("fill")!==t.color}).classed("fadeout",!1)},i.createBrushHandlePaths=function(){},i.extendBrush=function(t){return i.round()&&(t[0]=t[0].map(i.round()),t[1]=t[1].map(i.round())),t},i.brushIsEmpty=function(t){return!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},i._brushing=function(){if(e.event.sourceEvent&&(!e.event.sourceEvent.type||-1===["start","brush","end"].indexOf(e.event.sourceEvent.type))){var t=e.event.selection,r=i.brushIsEmpty(t);t&&(t=t.map(function(t){return t.map(function(t,e){return(0===e?i.x():i.y()).invert(t)})}),t=i.extendBrush(t),r=r&&i.brushIsEmpty(t)),i.redrawBrush(t,!1);var a=r?null:S.RangedTwoDimensionalFilter(t);L.trigger(function(){i.replaceFilter(a),i.redrawGroup()},n.EVENT_DELAY)}},i.redrawBrush=function(t,e){var n=i.brush(),r=i.gBrush();i.brushOn()&&r&&(i.resizing()&&i.setBrushExtents(e),t?(t=t.map(function(t){return t.map(function(t,e){return(0===e?i.x():i.y())(t)})}),y(e,i.transitionDuration(),i.transitionDelay())(r).call(n.move,t)):r.call(n.move,t)),i.fadeDeselectedArea(t)},i.setBrushY=function(t){t.call(i.brush().y(i.y()))},i.anchor(t,r)},t.selectMenu=function(t,n){var r,i="dc-select-option",a=B({}),o="Select all",l=!1,c=null,u=null,s=function(t,e){return a.keyAccessor()(t)>a.keyAccessor()(e)?1:a.keyAccessor()(e)>a.keyAccessor()(t)?-1:0},d=function(t){return a.valueAccessor()(t)>0};a.data(function(t){return t.all().filter(d)}),a._doRender=function(){return a.select("select").remove(),(r=a.root().append("select").classed("dc-select-menu",!0)).append("option").text(o).attr("value",""),a._doRedraw(),a};var f=window.navigator.userAgent;function h(t,n){var r,i=e.event.target;1===(r=i.selectedOptions?Array.prototype.slice.call(i.selectedOptions).map(function(t){return t.value}):[].slice.call(e.event.target.options).filter(function(t){return t.selected}).map(function(t){return t.value})).length&&""===r[0]?r=c||null:l||1!==r.length||(r=r[0]),a.onChange(r)}return f.indexOf("Trident/")>0&&-1===f.indexOf("MSIE")&&(a.redraw=a.render),a._doRedraw=function(){var t;return l?r.attr("multiple",!0):r.attr("multiple",null),null!==u?r.attr("size",u):r.attr("size",null),(t=r.selectAll("option."+i).data(a.data(),function(t){return a.keyAccessor()(t)})).exit().remove(),t.enter().append("option").classed(i,!0).attr("value",function(t){return a.keyAccessor()(t)}).merge(t).text(a.title()),r.selectAll("option."+i).sort(s),r.on("change",h),a.hasFilter()&&l?r.selectAll("option").property("selected",function(t){return void 0!==t&&a.filters().indexOf(String(a.keyAccessor()(t)))>=0}):a.hasFilter()?r.property("value",a.filter()):r.property("value",""),a},a.onChange=function(t){t&&l?a.replaceFilter([t]):t?a.replaceFilter(t):a.filterAll(),L.trigger(function(){a.redrawGroup()})},a.order=function(t){return arguments.length?(s=t,a):s},a.promptText=function(t){return arguments.length?(o=t,a):o},a.filterDisplayed=function(t){return arguments.length?(d=t,a):d},a.multiple=function(t){return arguments.length?(l=t,a):l},a.promptValue=function(t){return arguments.length?(c=t,a):c},a.numberVisible=function(t){return arguments.length?(u=t,a):u},a.size=_.deprecate(a.numberVisible,"selectMenu.size is ambiguous - use numberVisible instead"),a.anchor(t,n)},t.seriesChart=function(t,n){var r=P(t,n);var i,a={},l=U,c=e.ascending,u=function(t,n){return e.ascending(r.keyAccessor()(t),r.keyAccessor()(n))};function s(t){a[t].g()&&a[t].g().remove(),delete a[t]}function d(){Object.keys(a).map(s),a={}}return r._mandatoryAttributes().push("seriesAccessor","chart"),r.shareColors(!0),r._preprocessData=function(){var t,d=[],f=e.nest().key(i);c&&f.sortKeys(c),u&&f.sortValues(u);var h=f.entries(r.data()).map(function(e,i){var c=a[e.key]||l.call(r,r,n,e.key,i);return a[e.key]||(t=!0),a[e.key]=c,d.push(e.key),c.dimension(r.dimension()).group({all:"function"==typeof e.values?e.values:o.constant(e.values)},e.key).keyAccessor(r.keyAccessor()).valueAccessor(r.valueAccessor()).brushOn(!1)});Object.keys(a).filter(function(t){return-1===d.indexOf(t)}).forEach(function(e){s(e),t=!0}),r._compose(h),t&&r.legend()&&r.legend().render()},r.chart=function(t){return arguments.length?(l=t,d(),r):l},r.seriesAccessor=function(t){return arguments.length?(i=t,d(),r):i},r.seriesSort=function(t){return arguments.length?(c=t,d(),r):c},r.valueSort=function(t){return arguments.length?(u=t,d(),r):u},r._compose=r.compose,delete r.compose,r},t.stackMixin=G,t.stackableChart=G,t.sunburstChart=function(t,n){var r,i,a,l,c,u,s="pie-slice",d="empty-chart",f="empty",h=0,g=.5,y=H(T(B({})));function m(t){return t.path?t.value:y.cappedValueAccessor(t)}function v(){var t=e.min([y.width(),y.height()])/2;r=i&&i<t?i:t;var n,l=A();if(e.sum(y.data(),y.valueAccessor())?((n=b(o.toHierarchy(y.data(),y.valueAccessor()))).shift(),a.classed(d,!1)):(n=b(o.toHierarchy([],function(t){return t.value})),a.classed(d,!0)),a){var c=a.selectAll("g."+s).data(n);!function(t,e,n){var r=function(t){return t.enter().append("g").attr("class",function(t,e){return s+" _"+e+" "+s+"-level-"+t.depth})}(t);(function(t,e){var n=t.append("path").attr("fill",D).on("click",w).attr("d",function(t){return C(e,t)}),r=p(n,y.transitionDuration());r.attrTween&&r.attrTween("d",_)})(r,e),function(t){y.renderTitle()&&t.append("title").text(function(t){return y.title()(t)})}(r),function(t,e){if(y.renderLabel()){var n=a.selectAll("text."+s).data(t);n.exit().remove();var r=n.enter().append("text").attr("class",function(t,e){var n=s+" _"+e;return u&&(n+=" external"),n}).on("click",w);x(r,e)}}(n,e)}(c,l,n),function(t,e){(function(t,e){var n=a.selectAll("g."+s).data(t).select("path").attr("d",function(t,n){return C(e,t)}),r=p(n,y.transitionDuration());r.attrTween&&r.attrTween("d",_),r.attr("fill",D)})(t,e),function(t,e){if(y.renderLabel()){var n=a.selectAll("text."+s).data(t);x(n,e)}}(t,e),function(t){y.renderTitle()&&a.selectAll("g."+s).data(t).select("title").text(function(t){return y.title()(t)})}(t)}(n,l),function(t){t.exit().remove()}(c),y.hasFilter()?y.selectAll("g."+s).each(function(t){!function(t){return function(t){for(var e=0;e<y.filters().length;e++){var n=y.filters()[e];if(n.isFiltered(t))return!0}return!1}(t.path)}(t)?y.fadeDeselected(this):y.highlightSelected(this)}):y.selectAll("g."+s).each(function(t){y.resetHighlight(this)}),p(a,y.transitionDuration(),y.transitionDelay()).attr("transform","translate("+y.cx()+","+y.cy()+")")}}function x(t,n){p(t,y.transitionDuration()).attr("transform",function(t){return function(t,n){var i;return i=u?e.svg.arc().outerRadius(r+u).innerRadius(r+u).centroid(t):n.centroid(t),isNaN(i[0])||isNaN(i[1])?"translate(0,0)":"translate("+i+")"}(t,n)}).attr("text-anchor","middle").text(function(t){return function(t){return 0===m(t)}(t)||function(t){var e=t.x1-t.x0;return isNaN(e)||e<g}(t)?"":y.label()(t)})}function A(){return e.arc().startAngle(function(t){return t.x0}).endAngle(function(t){return t.x1}).innerRadius(function(t){return t.data.path&&1===t.data.path.length?h:Math.sqrt(t.y0)}).outerRadius(function(t){return Math.sqrt(t.y1)})}function b(t){var n=e.hierarchy(t).sum(function(t){return t.children?0:m(t)}).sort(function(t,n){return e.ascending(t.data.path,n.data.path)});return e.partition().size([2*Math.PI,r*r])(n),n.descendants().map(function(t){return t.key=t.data.key,t.path=t.data.path,t})}function _(t){var n=this._current;(function(t){return!t||isNaN(t.x0)||isNaN(t.y0)})(n)&&(n={x0:0,x1:0,y0:0,y1:0});var r={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y1},i=e.interpolate(n,r);return this._current=i(0),function(e){return C(A(),Object.assign({},t,i(e)))}}function D(t,e){return y.getColor(t.data,e)}function k(t){for(var e=t.path||t.key,n=S.HierarchyFilter(e),r=function(t){for(var e=S.HierarchyFilter(t),n=[],r=0;r<y.filters().length;r++){var i=y.filters()[r];(i.isFiltered(t)||e.isFiltered(i))&&n.push(i)}return n}(e),i=!1,a=r.length-1;a>=0;a--){var l=r[a];o.arraysIdentical(l,e)&&(i=!0),y.filter(r[a])}L.trigger(function(){i||y.filter(n),y.redrawGroup()})}function w(t,e){a.attr("class")!==d&&k(t)}function C(t,e){var n=t(e);return n.indexOf("NaN")>=0&&(n="M0,0"),n}function E(t,n){y.selectAll("g.pie-slice").each(function(r){t.name===r.key&&e.select(this).classed("highlight",n)})}return y.colorAccessor(y.cappedKeyAccessor),y.title(function(t){return y.cappedKeyAccessor(t)+": "+m(t)}),y.label(y.cappedKeyAccessor),y.renderLabel(!0),y.transitionDuration(350),y.filterHandler(function(t,e){return 0===e.length?t.filter(null):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0}return!1}),e}),y._doRender=function(){return y.resetSvg(),a=y.svg().append("g").attr("transform","translate("+y.cx()+","+y.cy()+")"),v(),y},y.innerRadius=function(t){return arguments.length?(h=t,y):h},y.radius=function(t){return arguments.length?(i=t,y):i},y.cx=function(t){return arguments.length?(l=t,y):l||y.width()/2},y.cy=function(t){return arguments.length?(c=t,y):c||y.height()/2},y.minAngleForLabel=function(t){return arguments.length?(g=t,y):g},y.emptyTitle=function(t){return 0===arguments.length?f:(f=t,y)},y.externalLabels=function(t){return 0===arguments.length?u:(u=t||void 0,y)},y._doRedraw=function(){return v(),y},y.onClick=w,y.legendables=function(){return y.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:y};return n.color=y.getColor(t,e),n})},y.legendHighlight=function(t){E(t,!0)},y.legendReset=function(t){E(t,!1)},y.legendToggle=function(t){y.onClick({key:t.name,others:t.others})},y.anchor(t,n)},t.textFilterWidget=function(t,e){var r=B({}),i=function(t){return t.toLowerCase()},a=function(t){return t=i(t),function(e){return-1!==i(e).indexOf(t)}},o="search";return r.group(function(){throw"the group function on textFilterWidget should never be called, please report the issue"}),r._doRender=function(){return r.select("input").remove(),r.root().append("input").classed("dc-text-filter-input",!0).on("input",function(){r.dimension().filterFunction(a(this.value)),L.trigger(function(){g()},n.EVENT_DELAY)}),r._doRedraw(),r},r._doRedraw=function(){return r.root().selectAll("input").attr("placeholder",o),r},r.normalize=function(t){return arguments.length?(i=t,r):i},r.placeHolder=function(t){return arguments.length?(o=t,r):o},r.filterFunctionFactory=function(t){return arguments.length?(a=t,r):a},r.anchor(t,e)},t.transition=p,t.units=m,t.utils=o,t.version="4.0.0-alpha.0",Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=dc.min.js.map